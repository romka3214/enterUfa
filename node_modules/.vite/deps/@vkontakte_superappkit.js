import "./chunk-DFKQJ226.js";

// node_modules/@vkontakte/superappkit/dist/index.js
function e(t2) {
  return (e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e2) {
    return typeof e2;
  } : function(e2) {
    return e2 && "function" == typeof Symbol && e2.constructor === Symbol && e2 !== Symbol.prototype ? "symbol" : typeof e2;
  })(t2);
}
var t = ["vk.com", "vk.ru"];
var n = ["agreements", "promo", "vkc_behavior", "vkc_auth_action", "vkc_brand", "vkc_display_mode", "service_groups", "external_device_id"];
var r = 0;
var o = 1;
var i = 3;
var a = 4;
var s = 6;
var c = 15;
var u = 16;
var l = 82;
var p = !("undefined" == typeof window || !window.document || !window.document.createElement);
var d = p && !!window.addEventListener;
var h = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function f(e2) {
  return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2.default : e2;
}
function m(e2, t2) {
  return e2(t2 = { exports: {} }, t2.exports), t2.exports;
}
var v = f(m(function(e2) {
  function t2(n2) {
    return "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? (e2.exports = t2 = function(e3) {
      return typeof e3;
    }, e2.exports.default = e2.exports, e2.exports.__esModule = true) : (e2.exports = t2 = function(e3) {
      return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
    }, e2.exports.default = e2.exports, e2.exports.__esModule = true), t2(n2);
  }
  e2.exports = t2, e2.exports.default = e2.exports, e2.exports.__esModule = true;
}));
var g = function() {
};
if (d)
  try {
    _ = Object.defineProperty({}, "passive", { get: function() {
    } });
    window.addEventListener("test", g, _), window.removeEventListener("test", g, _);
  } catch (e2) {
  }
var _;
!function() {
  if (!p)
    return false;
  var e2 = false;
  try {
    document.createElement("div").scrollTo({ top: 0, get behavior() {
      return e2 = true, "smooth";
    } });
  } catch (e3) {
  }
}();
var y = m(function(e2) {
  e2.exports = function(e3, t2) {
    (null == t2 || t2 > e3.length) && (t2 = e3.length);
    for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
      r2[n2] = e3[n2];
    return r2;
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
});
f(y);
var A = m(function(e2) {
  e2.exports = function(e3) {
    if (Array.isArray(e3))
      return y(e3);
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
});
f(A);
var E = m(function(e2) {
  e2.exports = function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
});
f(E);
var T = m(function(e2) {
  e2.exports = function(e3, t2) {
    if (e3) {
      if ("string" == typeof e3)
        return y(e3, t2);
      var n2 = Object.prototype.toString.call(e3).slice(8, -1);
      return "Object" === n2 && e3.constructor && (n2 = e3.constructor.name), "Map" === n2 || "Set" === n2 ? Array.from(e3) : "Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? y(e3, t2) : void 0;
    }
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
});
f(T);
var S = m(function(e2) {
  e2.exports = function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
});
f(S), f(m(function(e2) {
  e2.exports = function(e3) {
    return A(e3) || E(e3) || T(e3) || S();
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
}));
var O = f(m(function(e2) {
  e2.exports = function(e3, t2, n2) {
    return t2 in e3 ? Object.defineProperty(e3, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e3[t2] = n2, e3;
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
}));
function w(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function C(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? w(Object(n2), true).forEach(function(t3) {
      O(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : w(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
var b = { parse: function(e2) {
  if ("string" != typeof e2)
    return {};
  if (!(e2 = e2.trim().replace(/^[?#&]/, "")))
    return {};
  var t2 = /\?(.+)$/gi.exec(e2);
  return (t2 ? t2[1] : e2).split("&").reduce(function(e3, t3) {
    var n2 = t3.split("=");
    return n2[1] && (e3[n2[0]] = decodeURIComponent(n2[1])), e3;
  }, {});
}, stringify: function(e2) {
  var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
  if ("object" !== v(e2) || null === e2)
    return "";
  t2 = C({ encode: true }, t2);
  var n2 = function(e3) {
    return t2.encode ? encodeURIComponent(e3) : String(e3);
  };
  return Object.keys(e2).reduce(function(r2, o2) {
    var i2 = e2[o2];
    return void 0 === i2 ? r2 : null === i2 ? (t2.skipNull || r2.push([n2(o2), ""].join("=")), r2) : Array.isArray(i2) ? (i2.map(function(e3) {
      r2.push("".concat(n2(o2), "[]=").concat(n2(e3)));
    }).join(), r2) : (r2.push([n2(o2), n2(i2)].join("=")), r2);
  }, []).join("&");
} };
f(m(function(e2) {
  e2.exports = function(e3, t2) {
    if (!(e3 instanceof t2))
      throw new TypeError("Cannot call a class as a function");
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
})), f(m(function(e2) {
  function t2(e3, t3) {
    for (var n2 = 0; n2 < t3.length; n2++) {
      var r2 = t3[n2];
      r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e3, r2.key, r2);
    }
  }
  e2.exports = function(e3, n2, r2) {
    return n2 && t2(e3.prototype, n2), r2 && t2(e3, r2), e3;
  }, e2.exports.default = e2.exports, e2.exports.__esModule = true;
}));
var P;
var D = "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";
var I = function() {
  for (var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 21, t2 = "", n2 = e2; n2--; )
    t2 += D[64 * Math.random() | 0];
  return t2;
};
var N = (P = Object.freeze({ __proto__: null, default: {} })) && P.default || P;
var k = m(function(e2, t2) {
  var n2;
  e2.exports = (n2 = n2 || function(e3, t3) {
    var n3;
    if ("undefined" != typeof window && window.crypto && (n3 = window.crypto), "undefined" != typeof self && self.crypto && (n3 = self.crypto), "undefined" != typeof globalThis && globalThis.crypto && (n3 = globalThis.crypto), !n3 && "undefined" != typeof window && window.msCrypto && (n3 = window.msCrypto), !n3 && void 0 !== h && h.crypto && (n3 = h.crypto), !n3)
      try {
        n3 = N;
      } catch (e4) {
      }
    var r2 = function() {
      if (n3) {
        if ("function" == typeof n3.getRandomValues)
          try {
            return n3.getRandomValues(new Uint32Array(1))[0];
          } catch (e4) {
          }
        if ("function" == typeof n3.randomBytes)
          try {
            return n3.randomBytes(4).readInt32LE();
          } catch (e4) {
          }
      }
      throw new Error("Native crypto module could not be used to get secure random number.");
    }, o2 = Object.create || function() {
      function e4() {
      }
      return function(t4) {
        var n4;
        return e4.prototype = t4, n4 = new e4(), e4.prototype = null, n4;
      };
    }(), i2 = {}, a2 = i2.lib = {}, s2 = a2.Base = { extend: function(e4) {
      var t4 = o2(this);
      return e4 && t4.mixIn(e4), t4.hasOwnProperty("init") && this.init !== t4.init || (t4.init = function() {
        t4.$super.init.apply(this, arguments);
      }), t4.init.prototype = t4, t4.$super = this, t4;
    }, create: function() {
      var e4 = this.extend();
      return e4.init.apply(e4, arguments), e4;
    }, init: function() {
    }, mixIn: function(e4) {
      for (var t4 in e4)
        e4.hasOwnProperty(t4) && (this[t4] = e4[t4]);
      e4.hasOwnProperty("toString") && (this.toString = e4.toString);
    }, clone: function() {
      return this.init.prototype.extend(this);
    } }, c2 = a2.WordArray = s2.extend({ init: function(e4, t4) {
      e4 = this.words = e4 || [], this.sigBytes = null != t4 ? t4 : 4 * e4.length;
    }, toString: function(e4) {
      return (e4 || l2).stringify(this);
    }, concat: function(e4) {
      var t4 = this.words, n4 = e4.words, r3 = this.sigBytes, o3 = e4.sigBytes;
      if (this.clamp(), r3 % 4)
        for (var i3 = 0; i3 < o3; i3++) {
          var a3 = n4[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255;
          t4[r3 + i3 >>> 2] |= a3 << 24 - (r3 + i3) % 4 * 8;
        }
      else
        for (var s3 = 0; s3 < o3; s3 += 4)
          t4[r3 + s3 >>> 2] = n4[s3 >>> 2];
      return this.sigBytes += o3, this;
    }, clamp: function() {
      var t4 = this.words, n4 = this.sigBytes;
      t4[n4 >>> 2] &= 4294967295 << 32 - n4 % 4 * 8, t4.length = e3.ceil(n4 / 4);
    }, clone: function() {
      var e4 = s2.clone.call(this);
      return e4.words = this.words.slice(0), e4;
    }, random: function(e4) {
      for (var t4 = [], n4 = 0; n4 < e4; n4 += 4)
        t4.push(r2());
      return new c2.init(t4, e4);
    } }), u2 = i2.enc = {}, l2 = u2.Hex = { stringify: function(e4) {
      for (var t4 = e4.words, n4 = e4.sigBytes, r3 = [], o3 = 0; o3 < n4; o3++) {
        var i3 = t4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255;
        r3.push((i3 >>> 4).toString(16)), r3.push((15 & i3).toString(16));
      }
      return r3.join("");
    }, parse: function(e4) {
      for (var t4 = e4.length, n4 = [], r3 = 0; r3 < t4; r3 += 2)
        n4[r3 >>> 3] |= parseInt(e4.substr(r3, 2), 16) << 24 - r3 % 8 * 4;
      return new c2.init(n4, t4 / 2);
    } }, p2 = u2.Latin1 = { stringify: function(e4) {
      for (var t4 = e4.words, n4 = e4.sigBytes, r3 = [], o3 = 0; o3 < n4; o3++) {
        var i3 = t4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255;
        r3.push(String.fromCharCode(i3));
      }
      return r3.join("");
    }, parse: function(e4) {
      for (var t4 = e4.length, n4 = [], r3 = 0; r3 < t4; r3++)
        n4[r3 >>> 2] |= (255 & e4.charCodeAt(r3)) << 24 - r3 % 4 * 8;
      return new c2.init(n4, t4);
    } }, d2 = u2.Utf8 = { stringify: function(e4) {
      try {
        return decodeURIComponent(escape(p2.stringify(e4)));
      } catch (e5) {
        throw new Error("Malformed UTF-8 data");
      }
    }, parse: function(e4) {
      return p2.parse(unescape(encodeURIComponent(e4)));
    } }, f2 = a2.BufferedBlockAlgorithm = s2.extend({ reset: function() {
      this._data = new c2.init(), this._nDataBytes = 0;
    }, _append: function(e4) {
      "string" == typeof e4 && (e4 = d2.parse(e4)), this._data.concat(e4), this._nDataBytes += e4.sigBytes;
    }, _process: function(t4) {
      var n4, r3 = this._data, o3 = r3.words, i3 = r3.sigBytes, a3 = this.blockSize, s3 = i3 / (4 * a3), u3 = (s3 = t4 ? e3.ceil(s3) : e3.max((0 | s3) - this._minBufferSize, 0)) * a3, l3 = e3.min(4 * u3, i3);
      if (u3) {
        for (var p3 = 0; p3 < u3; p3 += a3)
          this._doProcessBlock(o3, p3);
        n4 = o3.splice(0, u3), r3.sigBytes -= l3;
      }
      return new c2.init(n4, l3);
    }, clone: function() {
      var e4 = s2.clone.call(this);
      return e4._data = this._data.clone(), e4;
    }, _minBufferSize: 0 }), m2 = (a2.Hasher = f2.extend({ cfg: s2.extend(), init: function(e4) {
      this.cfg = this.cfg.extend(e4), this.reset();
    }, reset: function() {
      f2.reset.call(this), this._doReset();
    }, update: function(e4) {
      return this._append(e4), this._process(), this;
    }, finalize: function(e4) {
      return e4 && this._append(e4), this._doFinalize();
    }, blockSize: 16, _createHelper: function(e4) {
      return function(t4, n4) {
        return new e4.init(n4).finalize(t4);
      };
    }, _createHmacHelper: function(e4) {
      return function(t4, n4) {
        return new m2.HMAC.init(e4, n4).finalize(t4);
      };
    } }), i2.algo = {});
    return i2;
  }(Math), n2);
});
var R = m(function(e2, t2) {
  var n2;
  e2.exports = (n2 = k, function(e3) {
    var t3 = n2, r2 = t3.lib, o2 = r2.WordArray, i2 = r2.Hasher, a2 = t3.algo, s2 = [], c2 = [];
    !function() {
      function t4(t5) {
        for (var n4 = e3.sqrt(t5), r4 = 2; r4 <= n4; r4++)
          if (!(t5 % r4))
            return false;
        return true;
      }
      function n3(e4) {
        return 4294967296 * (e4 - (0 | e4)) | 0;
      }
      for (var r3 = 2, o3 = 0; o3 < 64; )
        t4(r3) && (o3 < 8 && (s2[o3] = n3(e3.pow(r3, 0.5))), c2[o3] = n3(e3.pow(r3, 1 / 3)), o3++), r3++;
    }();
    var u2 = [], l2 = a2.SHA256 = i2.extend({ _doReset: function() {
      this._hash = new o2.init(s2.slice(0));
    }, _doProcessBlock: function(e4, t4) {
      for (var n3 = this._hash.words, r3 = n3[0], o3 = n3[1], i3 = n3[2], a3 = n3[3], s3 = n3[4], l3 = n3[5], p2 = n3[6], d2 = n3[7], h2 = 0; h2 < 64; h2++) {
        if (h2 < 16)
          u2[h2] = 0 | e4[t4 + h2];
        else {
          var f2 = u2[h2 - 15], m2 = (f2 << 25 | f2 >>> 7) ^ (f2 << 14 | f2 >>> 18) ^ f2 >>> 3, v2 = u2[h2 - 2], g2 = (v2 << 15 | v2 >>> 17) ^ (v2 << 13 | v2 >>> 19) ^ v2 >>> 10;
          u2[h2] = m2 + u2[h2 - 7] + g2 + u2[h2 - 16];
        }
        var _ = r3 & o3 ^ r3 & i3 ^ o3 & i3, y2 = (r3 << 30 | r3 >>> 2) ^ (r3 << 19 | r3 >>> 13) ^ (r3 << 10 | r3 >>> 22), A2 = d2 + ((s3 << 26 | s3 >>> 6) ^ (s3 << 21 | s3 >>> 11) ^ (s3 << 7 | s3 >>> 25)) + (s3 & l3 ^ ~s3 & p2) + c2[h2] + u2[h2];
        d2 = p2, p2 = l3, l3 = s3, s3 = a3 + A2 | 0, a3 = i3, i3 = o3, o3 = r3, r3 = A2 + (y2 + _) | 0;
      }
      n3[0] = n3[0] + r3 | 0, n3[1] = n3[1] + o3 | 0, n3[2] = n3[2] + i3 | 0, n3[3] = n3[3] + a3 | 0, n3[4] = n3[4] + s3 | 0, n3[5] = n3[5] + l3 | 0, n3[6] = n3[6] + p2 | 0, n3[7] = n3[7] + d2 | 0;
    }, _doFinalize: function() {
      var t4 = this._data, n3 = t4.words, r3 = 8 * this._nDataBytes, o3 = 8 * t4.sigBytes;
      return n3[o3 >>> 5] |= 128 << 24 - o3 % 32, n3[14 + (o3 + 64 >>> 9 << 4)] = e3.floor(r3 / 4294967296), n3[15 + (o3 + 64 >>> 9 << 4)] = r3, t4.sigBytes = 4 * n3.length, this._process(), this._hash;
    }, clone: function() {
      var e4 = i2.clone.call(this);
      return e4._hash = this._hash.clone(), e4;
    } });
    t3.SHA256 = i2._createHelper(l2), t3.HmacSHA256 = i2._createHmacHelper(l2);
  }(Math), n2.SHA256);
});
var x = m(function(e2, t2) {
  var n2, r2, o2;
  e2.exports = (r2 = (n2 = o2 = k).lib.WordArray, n2.enc.Base64 = { stringify: function(e3) {
    var t3 = e3.words, n3 = e3.sigBytes, r3 = this._map;
    e3.clamp();
    for (var o3 = [], i2 = 0; i2 < n3; i2 += 3)
      for (var a2 = (t3[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255) << 16 | (t3[i2 + 1 >>> 2] >>> 24 - (i2 + 1) % 4 * 8 & 255) << 8 | t3[i2 + 2 >>> 2] >>> 24 - (i2 + 2) % 4 * 8 & 255, s2 = 0; s2 < 4 && i2 + 0.75 * s2 < n3; s2++)
        o3.push(r3.charAt(a2 >>> 6 * (3 - s2) & 63));
    var c2 = r3.charAt(64);
    if (c2)
      for (; o3.length % 4; )
        o3.push(c2);
    return o3.join("");
  }, parse: function(e3) {
    var t3 = e3.length, n3 = this._map, o3 = this._reverseMap;
    if (!o3) {
      o3 = this._reverseMap = [];
      for (var i2 = 0; i2 < n3.length; i2++)
        o3[n3.charCodeAt(i2)] = i2;
    }
    var a2 = n3.charAt(64);
    if (a2) {
      var s2 = e3.indexOf(a2);
      -1 !== s2 && (t3 = s2);
    }
    return function(e4, t4, n4) {
      for (var o4 = [], i3 = 0, a3 = 0; a3 < t4; a3++)
        if (a3 % 4) {
          var s3 = n4[e4.charCodeAt(a3 - 1)] << a3 % 4 * 2, c2 = n4[e4.charCodeAt(a3)] >>> 6 - a3 % 4 * 2, u2 = s3 | c2;
          o4[i3 >>> 2] |= u2 << 24 - i3 % 4 * 8, i3++;
        }
      return r2.create(o4, i3);
    }(e3, t3, o3);
  }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, o2.enc.Base64);
});
function K(e2) {
  return b.stringify(e2, { skipNull: true });
}
function M(e2) {
  return Object.keys(e2).filter(function(e3) {
    return n.includes(e3);
  });
}
function L(e2) {
  var t2;
  return Boolean(null === (t2 = M(e2)) || void 0 === t2 ? void 0 : t2.length);
}
function V(e2) {
  var t2 = function(e3) {
    return M(e3).reduce(function(t3, n2) {
      return t3[n2] = e3[n2], t3;
    }, {});
  }(e2);
  return btoa(JSON.stringify(t2));
}
function U(e2, t2) {
  var n2, r2, o2 = document.createElement("iframe");
  for (var i2 in e2 && (o2.src = e2), o2.style.cssText = null !== (n2 = null == t2 ? void 0 : t2.cssText) && void 0 !== n2 ? n2 : "", o2.width = "100%", o2.height = "100%", o2.style.border = "none", null == t2 ? void 0 : t2.properties)
    t2 && t2.properties.hasOwnProperty(i2) && (o2[i2] = null !== (r2 = t2.properties[i2]) && void 0 !== r2 ? r2 : "");
  return o2;
}
function H() {
  for (var t2 = [], n2 = 0; n2 < arguments.length; n2++)
    t2[n2] = arguments[n2];
  var r2 = function(t3) {
    return t3 && "object" === e(t3);
  };
  return t2.reduce(function(e2, t3) {
    return Object.keys(t3).forEach(function(n3) {
      var o2 = e2[n3], i2 = t3[n3];
      Array.isArray(o2) && Array.isArray(i2) ? e2[n3] = o2.concat.apply(o2, i2) : r2(o2) && r2(i2) ? e2[n3] = H(o2, i2) : e2[n3] = i2;
    }), e2;
  }, {});
}
function G(e2, t2) {
  return void 0 === e2 ? t2 : "number" != typeof e2 ? e2 ? 1 : 0 : e2;
}
function B(t2, n2) {
  return t2 && "object" === e(t2) ? Object.keys(t2).reduce(function(e2, r2) {
    return n2.includes(r2) ? (e2[r2] = t2[r2], e2) : e2;
  }, {}) : t2;
}
var W;
var F;
var z;
var j = function(e2) {
  var t2 = R(e2);
  return x.stringify(t2).replace(/=*$/g, "").replace(/\+/g, "-").replace(/\//g, "_");
};
var Y = function() {
  return I().replace("-", "").replace("_", "");
};
var q = new (function() {
  function e2() {
    this.savedStyles = [], this.bodyScrollYValue = 0, this.isFreezed = false;
  }
  return e2.prototype.freezeBodyOverflow = function() {
    if (!this.isFreezed) {
      this.isFreezed = true;
      var e3 = (n2 = window.document.documentElement.clientWidth, Math.abs(window.innerWidth - n2)), t2 = parseInt(window.getComputedStyle(window.document.body).paddingRight, 10) || 0;
      this.bodyScrollYValue = window.pageYOffset || window.scrollY, this.savedStyles = [], this.savedStyles.push({ value: window.document.body.style.paddingRight, property: "padding-right" }, { value: window.document.body.style.overflow, property: "overflow" }, { value: window.document.body.style.overflowX, property: "overflow-x" }, { value: window.document.body.style.overflowY, property: "overflow-y" }), window.document.body.style.setProperty("overflow", "hidden"), window.document.body.style.setProperty("padding-right", e3 + t2 + "px");
    }
    var n2;
  }, e2.prototype.restoreBodyOverflow = function() {
    this.isFreezed && (this.savedStyles.forEach(function(e3) {
      var t2 = e3.value, n2 = e3.property;
      t2 ? window.document.body.style.setProperty(n2, t2) : window.document.body.style.removeProperty(n2);
    }), window.scrollTo(0, this.bodyScrollYValue), this.isFreezed = false);
  }, e2;
}())();
!function(e2) {
  e2.OPEN = "VKSDKOpen", e2.CLOSE = "VKSDKClose", e2.LOGOUT = "VKSDKLogout", e2.GET_CAPTCHA = "VKSDKGetCaptcha", e2.CAPTCHA_SUCCESS = "VKSDKGetCaptchaSuccess", e2.CAPTCHA_FAILED = "VKSDKGetCaptchaFail", e2.AUTH_NEEDED = "VKSDKAuthNeeded", e2.UPDATE_PARAMS = "VKSDKUpdateParams", e2.REQUEST_SUPERAPP_TOKEN = "VKSDKRequestSuperAppToken", e2.ERROR = "VKSDKError";
}(W || (W = {})), function(e2) {
  e2.INIT = "VKSDKInit";
}(F || (F = {})), function(e2) {
  e2[e2.UNKNOWN = 1] = "UNKNOWN", e2[e2.MISSING_PARAM = 2] = "MISSING_PARAM", e2[e2.CONNECTION_LOST = 3] = "CONNECTION_LOST", e2[e2.USER_DENIED = 4] = "USER_DENIED", e2[e2.INVALID_PARAMS = 5] = "INVALID_PARAMS", e2[e2.CUSTOM = 6] = "CUSTOM", e2[e2.LOADING_ERROR = 7] = "LOADING_ERROR", e2[e2.CONNECT_WINDOW_CLOSED = 7] = "CONNECT_WINDOW_CLOSED", e2[e2.CONNECT_WINDOW_NOT_OPENED = 8] = "CONNECT_WINDOW_NOT_OPENED", e2[e2.CONNECT_DOMAIN_NOT_ALLOWED = 9] = "CONNECT_DOMAIN_NOT_ALLOWED", e2[e2.CONNECT_UNKNOWN_SDK_MESSAGE = 10] = "CONNECT_UNKNOWN_SDK_MESSAGE", e2[e2.CONNECT_CLIENT_SDK_ERROR = 11] = "CONNECT_CLIENT_SDK_ERROR", e2[e2.VALIDATE_ERROR = 12] = "VALIDATE_ERROR", e2[e2.CAPTCHA_ERROR = 14] = "CAPTCHA_ERROR", e2[e2.OLD_MISSING_PARAM = 100] = "OLD_MISSING_PARAM";
}(z || (z = {}));
var Z = function(e2, t2) {
  return 'Wrong "' + e2 + '" param. ' + (t2 || "");
};
var J = function() {
  return "Connect window was closed.";
};
var Q = function() {
  return "Connect window was not opened.";
};
var X = function(e2) {
  return 'URL domain "' + e2 + '" is not allowed.';
};
var $ = function(e2) {
  return "This SDK message is unknown: " + e2;
};
var ee = function(e2) {
  return e2.error + ";" + e2.errorCode;
};
var te = function() {
  return "Loading timeout";
};
var ne = function(e2) {
  return "The " + e2 + " parameter must be a number";
};
var re = function(e2) {
  return "The " + e2 + " parameter must be a string";
};
var oe = function(e2) {
  return "The " + e2 + " is required parameter";
};
var ie = function(e2) {
  return "The " + e2 + " parameter must be a number or a string";
};
var ae = function(e2) {
  return "The " + e2 + " parameter must be Ð° function";
};
var se = function(e2, t2) {
  return (se = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
    e3.__proto__ = t3;
  } || function(e3, t3) {
    for (var n2 in t3)
      Object.prototype.hasOwnProperty.call(t3, n2) && (e3[n2] = t3[n2]);
  })(e2, t2);
};
function ce(e2, t2) {
  if ("function" != typeof t2 && null !== t2)
    throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
  function n2() {
    this.constructor = e2;
  }
  se(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
}
var ue;
var le;
var pe;
var de;
var he = function() {
  return (he = Object.assign || function(e2) {
    for (var t2, n2 = 1, r2 = arguments.length; n2 < r2; n2++)
      for (var o2 in t2 = arguments[n2])
        Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
    return e2;
  }).apply(this, arguments);
};
function fe(e2) {
  return e2 = e2 || /* @__PURE__ */ Object.create(null), { on: function(t2, n2) {
    (e2[t2] || (e2[t2] = [])).push(n2);
  }, off: function(t2, n2) {
    e2[t2] && e2[t2].splice(e2[t2].indexOf(n2) >>> 0, 1);
  }, emit: function(t2, n2) {
    (e2[t2] || []).slice().map(function(e3) {
      e3(n2);
    }), (e2["*"] || []).slice().map(function(e3) {
      e3(t2, n2);
    });
  } };
}
function me(e2) {
  return "number" == typeof e2;
}
function ve(e2) {
  return "string" == typeof e2;
}
function ge(e2) {
  return void 0 !== e2 && "" !== e2 && null !== e2;
}
function _e(e2) {
  return "function" == typeof e2;
}
function ye(e2, t2, n2, r2) {
  return { type: e2, code: t2, message: n2, params: r2 };
}
function Ae(e2, t2) {
  return { type: z[z.VALIDATE_ERROR], code: z.VALIDATE_ERROR, message: e2, params: t2 };
}
function Ee(e2) {
  return e2.message ? { code: e2.code, reason: e2.message, data: e2.params } : { code: e2.code, data: e2.params };
}
!function(e2) {
  e2.GET_CAPTCHA = "VKSDKGetCaptcha", e2.APP_CLOSE = "VKWebAppClose", e2.APP_READY = "VKSDKMiniAppReady", e2.RESIZE = "VKSDKMiniAppResize", e2.APP_INIT_CONFIG = "VKSDKMiniAppInitConfig", e2.OPEN_APP = "VKWebAppOpenApp", e2.OPEN_PAY_FORM = "VKWebAppOpenPayForm", e2.ACTION_DONE = "VKWebAppActionDone", e2.SET_TITLE = "VKWebAppSetTitle", e2.AUTH_BY_EXCHANGE_TOKEN = "VKWebAppAuthByExchangeToken", e2.FORCE_LOGOUT = "VKWebAppForceLogout";
}(ue || (ue = {})), function(e2) {
  e2.OPEN = "open", e2.HIDE = "hide", e2.CLOSE = "close", e2.SHOW = "show", e2.MESSAGE = "message", e2.CREATE_APP = "createapp";
}(le || (le = {})), function(e2) {
  e2.SUPERAPP_TOKEN = "VKSDKGeneralSuperAppToken", e2.AUTH_NEEDED = "VKSDKGeneralAuthNeeded", e2.OPEN_APP = "VKSDKGeneralOpenApp";
}(pe || (pe = {})), function(e2) {
  e2.SUPERAPP_TOKEN_CHANGE_V2 = "superAppTokenV2", e2.SUPERAPP_TOKEN_CHANGE = "superAppToken";
}(de || (de = {}));
var Te;
var Se = function() {
  function e2(e3, t2, n2) {
    void 0 === e3 && (e3 = "Parameter validation error"), this.errorText = e3, this.params = t2, this.valid = n2;
  }
  return e2.prototype.isValid = function() {
    return Boolean(this.valid);
  }, e2.prototype.error = function(e3) {
    return this.isValid() ? null : e3 ? Ee(Ae(this.errorText, this.params)) : Ae(this.errorText, this.params);
  }, e2;
}();
var Oe = function() {
  function e2(e3) {
    this.rules = e3;
  }
  return e2.prototype.validate = function(e3) {
    for (var t2 in this.rules)
      if (this.rules.hasOwnProperty(t2))
        for (var n2 = 0; n2 < this.rules[t2].length; n2++) {
          var r2 = this.rules[t2][n2];
          if (!r2.rule(e3[t2]))
            return new Se(r2.errorText, e3, false);
        }
    return new Se("", e3, true);
  }, e2;
}();
var we = (new Oe({ params: [{ rule: ge, errorText: oe("params") }] }), new Oe({ token: [{ rule: ve, errorText: re("token") }] }));
var Ce = new Oe({ event: [{ rule: ve, errorText: re("event") }, { rule: ge, errorText: oe("event") }], handler: [{ rule: ge, errorText: oe("handler") }] });
var be = new Oe({ app: [{ rule: function(e2) {
  return me(e2) || ve(e2);
}, errorText: ie("app") }, { rule: ge, errorText: oe("app") }] });
var Pe = new Oe({ message: [{ rule: ge, errorText: oe("message") }] });
var De = new Oe({ handler: [{ rule: ge, errorText: oe("handler") }, { rule: _e, errorText: ae("handler") }] });
var Ie = new Oe({ handler: [{ rule: ge, errorText: oe("handler") }, { rule: _e, errorText: ae("handler") }] });
var Ne = new Oe({ handler: [{ rule: ge, errorText: oe("handler") }, { rule: _e, errorText: ae("handler") }] });
var ke = new Oe({ appId: [{ rule: me, errorText: ne("appId") }] });
var Re = { appId: 0, superAppToken: "", superAppTokenV2: "", loginDomain: "login.vk.com", oauthDomain: "oauth.vk.com", connectDomain: "id.vk.com", _debug: false, _localhost: false };
var xe = {};
var Ke = function() {
  function e2() {
  }
  return e2.init = function(e3) {
    if (!e3.appId)
      throw new Error("appId required");
    var t2 = ke.validate({ appId: e3.appId });
    !t2.isValid() && console.error(t2.error()), Re.appId = e3.appId, Re.superAppToken = e3.superAppToken || "", Re.superAppTokenV2 = e3.superAppTokenV2 || "", Re.loginDomain = e3.loginDomain || "login.vk.com", Re.oauthDomain = e3.oauthDomain || "oauth.vk.com", Re.connectDomain = e3.connectDomain || "id.vk.com", Re.appSettings = e3.appSettings, Re._debug = !!e3._debug, Re._localhost = !!e3._localhost;
  }, e2.get = function() {
    return Re;
  }, e2.setSuperAppToken = function(t2, n2) {
    void 0 === n2 && (n2 = {});
    var r2 = we.validate({ token: t2 });
    !r2.isValid() && console.error(r2.error()), 2 === n2.version ? (Re.superAppTokenV2 = t2, e2.events.emit(de.SUPERAPP_TOKEN_CHANGE_V2, t2)) : (Re.superAppToken = t2, e2.events.emit(de.SUPERAPP_TOKEN_CHANGE, t2));
  }, e2.onRequestSuperAppToken = function(e3) {
    var t2 = De.validate({ handler: e3 });
    !t2.isValid() && console.error(t2.error()), xe.requestSuperAppToken = e3;
  }, e2._requestSuperAppToken = function(t2, n2) {
    var r2;
    void 0 === n2 && (n2 = {}), xe.requestSuperAppToken && (r2 = xe.requestSuperAppToken(t2, n2)), r2 && r2.then(function(t3) {
      return e2.setSuperAppToken(t3, n2);
    }).catch(console.error);
  }, e2.onAuth = function(e3) {
    var t2 = Ie.validate({ handler: e3 });
    !t2.isValid() && console.error(t2.error()), xe.auth = e3;
  }, e2._auth = function(t2) {
    var n2;
    void 0 === t2 && (t2 = {}), xe.auth && (n2 = xe.auth()), n2 && n2.then(function(n3) {
      e2.setSuperAppToken(n3, t2);
    }).catch(console.error);
  }, e2.onOpenApp = function(e3) {
    xe.openApp = e3;
  }, e2._openApp = function(e3) {
    xe.openApp && xe.openApp(e3.app);
  }, e2.onLogout = function(e3) {
    var t2 = Ne.validate({ handler: e3 });
    !t2.isValid() && console.error(t2.error()), xe.logout = e3;
  }, e2._logout = function() {
    xe.logout && xe.logout();
  }, e2.fetchDomain = function() {
    return Boolean(Te) || (Te = new Promise(function(e3) {
      fetch("https://vk.ru/domain.txt").then(function(e4) {
        return e4.text();
      }).then(function(e4) {
        return e4.trim();
      }).then(function(e4) {
        Re.loginDomain = Re.loginDomain.replace("vk.com", e4), Re.oauthDomain = Re.oauthDomain.replace("vk.com", e4), Re.connectDomain = Re.connectDomain.replace("vk.com", e4);
      }).then(e3).catch(function(t2) {
        e3(), console.warn(t2);
      });
    })), Te;
  }, e2.events = fe(), e2;
}();
var Me = new Oe({ iframe: [{ rule: ge, errorText: oe("iframe") }], origin: [{ rule: ve, errorText: re("origin") }, { rule: ge, errorText: oe("origin") }] });
var Le = new Oe({ event: [{ rule: ge, errorText: oe("event") }] });
var Ve = new Oe({ handler: [{ rule: ge, errorText: oe("handler") }, { rule: _e, errorText: ae("handler") }] });
var Ue = new Oe({ handler: [{ rule: ge, errorText: oe("handler") }], params: [{ rule: ge, errorText: oe("params") }] });
var He = function(e2) {
  var t2 = this;
  this.handler = function() {
    return {};
  }, this.destroy = function() {
    delete t2.config, window.removeEventListener("message", t2.handleMessage);
  }, this.onMessage = function(e3) {
    var n3 = Ve.validate({ handler: e3 });
    !n3.isValid() && console.error(n3.error()), t2.handler = e3;
  }, this.sendMessage = function(e3) {
    var n3, r2 = Ue.validate(e3);
    !r2.isValid() && console.error(r2.error()), null === (n3 = t2.config.iframe.contentWindow) || void 0 === n3 || n3.postMessage(he({ type: "vk-sak-sdk" }, e3), t2.config.origin);
  }, this.handleMessage = function(e3) {
    var n3 = Le.validate({ event: e3 });
    !n3.isValid() && console.error(n3.error()), t2.config.origin && e3.origin === t2.config.origin && e3.source === t2.config.iframe.contentWindow && e3.data && "vk-sak-sdk" === e3.data.type && t2.handler(e3.data);
  };
  var n2 = Me.validate(e2);
  !n2.isValid() && console.error(n2.error()), this.config = e2, window.addEventListener("message", this.handleMessage);
};
var Ge = function() {
  function e2() {
    var e3 = this;
    this.resolve = function(t2) {
      if (Boolean(e3.promise))
        return e3.finished = true, e3.active = false, e3.resolveHandler(t2);
    }, this.reject = function(t2) {
      if (Boolean(e3.promise))
        return e3.finished = true, e3.active = false, e3.rejectHandler(t2);
    };
  }
  return e2.prototype.start = function() {
    var e3 = this;
    this.active = true, this.finished = false, this.promise = new Promise(function(t2, n2) {
      e3.resolveHandler = t2, e3.rejectHandler = n2;
    });
  }, e2.prototype.get = function() {
    return this.promise;
  }, e2;
}();
var Be = ["extend_token", "login_with_user", "login_silent_user", "__sferum_invite_link", "registration_with_phone", "registration_with_email", "validate_phone", "bind_ok_account", "no_password_flow", "confirm_service_action", "login_with_eljour", "login_with_edu_profile", "login_with_multi_user", "auth_validation_phone", "qr_auth", "multi_account_flow"];
function We(e2) {
  return e2 && Be.includes(e2.name) ? btoa(JSON.stringify(e2)) : "";
}
function Fe(e2) {
  return e2 ? btoa(JSON.stringify(e2)) : "";
}
function ze(e2, t2) {
  return void 0 === t2 && (t2 = "auth"), Ke.fetchDomain().then(function() {
    var n2 = Ke.get(), r2 = n2.appId, o2 = n2.connectDomain, i2 = n2.appSettings, a2 = n2._debug, s2 = n2._localhost, c2 = he({ app_id: r2, response_type: "silent_token", v: "1.60.0", debug: a2 ? 1 : null, localhost: s2 ? 1 : null }, e2);
    i2 && L(i2) && (c2.app_settings = V(i2));
    var u2 = K(c2);
    return Promise.resolve("https://" + o2 + "/" + t2 + "?" + u2);
  });
}
var je;
var Ye = [r, o, i, a, s, c, u, l];
!function(e2) {
  e2.Default = "default", e2.NamePhone = "name_phone", e2.PhoneName = "phone_name";
}(je || (je = {}));
var qe;
var Ze = [je.Default, je.NamePhone, je.PhoneName];
!function(e2) {
  e2.Primary = "primary", e2.Flat = "flat";
}(qe || (qe = {}));
var Je = [qe.Primary, qe.Flat];
var Qe;
!function(e2) {
  e2.CAPTCHA_SUCCESS = "VKSDKAuthCaptchaSuccess", e2.CAPTCHA_FAIL = "VKSDKAuthCaptchaFail";
}(Qe || (Qe = {}));
var Xe;
var $e = function(e2, t2, n2) {
  var r2 = this;
  this.events = fe(), this.showReadyPromiseTask = new Ge(), this.init = function() {
    Ke.fetchDomain().then(function() {
      ze(he(he({ origin: location.protocol + "//" + location.host, uuid: r2.uuid }, r2.captchaData), { scheme: r2.scheme }), "auth_captcha").then(r2.handleCaptcha);
    });
  }, this.createFrame = function() {
    return r2.iframe = U("", { cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      min-height: 100vh;\n      border: none;\n      z-index: 99999;\n     " }), r2;
  }, this.handleError = function(e3) {
    var t3 = Ee(ye(z[z.CUSTOM], z.CUSTOM, "", e3));
    r2.events.emit(W.ERROR, t3);
  }, this.onMessage = function(e3) {
    switch (e3.handler) {
      case W.ERROR:
        r2.handleError(e3.params);
        break;
      case Qe.CAPTCHA_SUCCESS:
        r2.showReadyPromiseTask.resolve(e3.params), r2.destroy();
        break;
      default:
        r2.showReadyPromiseTask.reject(), r2.destroy();
    }
  }, this.handleCaptcha = function(e3) {
    r2.iframe.src = e3, document.body.appendChild(r2.iframe), r2.bridge = new He({ iframe: r2.iframe, origin: "https://" + Ke.get().connectDomain }), r2.bridge.onMessage(r2.onMessage);
  }, this.destroy = function() {
    r2.iframe && document.body.removeChild(r2.iframe), r2.bridge && r2.bridge.destroy();
  }, this.show = function() {
    return r2.iframe.style.display = "block", new Promise(function(e3) {
      r2.showReadyPromiseTask.start(), r2.showReadyPromiseTask.get().then(e3);
    });
  }, this.uuid = e2, this.captchaData = t2, this.scheme = n2 || "bright_light", this.createFrame().init();
};
var et = function() {
  function e2(t2) {
    var n2 = this;
    this.readyPromiseResolve = null, this.readyPromise = null, this.child = null, this.initialTitle = window.document.title, this.open = function(e3, t3) {
      return Ke.fetchDomain().then(function() {
        return n2.loading ? (n2.getMiniAppUrl(e3, t3).then(function(e4) {
          n2.iframe.src = e4;
        }), n2.loading = new Promise(function(e4) {
          n2.iframe.onload = function() {
            n2.iframe.onload = null, e4();
          };
        }), n2.readyPromise = new Promise(function(e4) {
          return n2.readyPromiseResolve = e4;
        }), n2.eventOpenSettings(), n2.readyPromise) : n2.preload(e3, t3).catch(console.error);
      });
    }, this.eventOpenSettings = function() {
      n2.iframe.style.display = "block", n2.params.stackMode || q.freezeBodyOverflow(), n2.loading.then(n2.handleResize).catch(console.error), n2.events.emit(le.OPEN);
    }, this.hide = function() {
      n2.iframe.style.display = "none", n2.params.stackMode || q.restoreBodyOverflow(), n2.events.emit(le.HIDE);
    }, this.close = function(e3) {
      window.document.title !== n2.initialTitle && (window.document.title = n2.initialTitle), n2.params.stackMode || q.restoreBodyOverflow(), n2.iframe && n2.iframe.remove(), n2.bridge && n2.bridge.destroy(), delete n2.iframe, delete n2.bridge, Ke.events.off(de.SUPERAPP_TOKEN_CHANGE, n2.onSuperAppToken), window.removeEventListener("resize", n2.handleResize), n2.events.emit(le.CLOSE, e3);
    }, this.show = function() {
      if (!n2.loading)
        throw new Error('App is not loaded, use "open" or "preload" methods');
      n2.iframe.style.display = "block", n2.params.stackMode || q.freezeBodyOverflow(), n2.events.emit(le.SHOW);
    }, this.preload = function(e3, t3) {
      return Ke.fetchDomain().then(function() {
        var r3 = document.createElement("iframe"), o2 = window.innerHeight, i2 = isFinite(n2.params.zIndex) ? n2.params.zIndex : 999999;
        return n2.getMiniAppUrl(e3, t3).then(function(e4) {
          r3.src = e4;
        }), r3.setAttribute("allow", "geolocation"), r3.style.cssText = "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + o2 + "px;\n      min-height: " + o2 + "px;\n      border: none;\n      z-index: " + i2 + ";\n    ", n2.iframe = r3, document.body.appendChild(n2.iframe), n2.bridge = new He({ iframe: n2.iframe, origin: "https://" + Ke.get().connectDomain }), n2.loading = new Promise(function(e4) {
          r3.onload = function() {
            r3.onload = null, e4();
          };
        }), n2.readyPromise = new Promise(function(e4) {
          return n2.readyPromiseResolve = e4;
        }), n2.bridge.onMessage(n2.handleMessage), Ke.events.on(de.SUPERAPP_TOKEN_CHANGE, n2.onSuperAppToken), window.addEventListener("resize", n2.handleResize), n2.eventOpenSettings(), n2.loading;
      });
    }, this.sendMessage = function(e3) {
      var t3 = Pe.validate({ message: e3 });
      !t3.isValid() && console.error(t3.error()), n2.bridge.sendMessage(e3);
    }, this.onSuperAppToken = function(e3) {
      n2.bridge.sendMessage({ handler: pe.SUPERAPP_TOKEN, params: { result: e3 } });
    }, this.handleError = function(e3) {
      var t3 = Ee(ye(z[z.CUSTOM], z.CUSTOM, "", e3));
      n2.events.emit(W.ERROR, t3);
    }, this.handleMessage = function(e3) {
      switch (e3.handler) {
        case W.GET_CAPTCHA:
          var t3 = e3.params.uuid, r3 = new $e(t3, { captcha_sid: e3.params.captcha_sid, captcha_img: e3.params.captcha_img });
          r3.show().then(function(e4) {
            n2.bridge.sendMessage({ handler: W.CAPTCHA_SUCCESS, params: he({ uuid: t3 }, e4) });
          }).catch(function() {
            n2.bridge.sendMessage({ handler: W.CAPTCHA_FAILED, params: { uuid: t3 } }), r3.destroy();
          });
          break;
        case ue.APP_CLOSE:
          n2.hide();
          break;
        case W.ERROR:
          n2.handleError(e3.params);
          break;
        case ue.APP_READY:
          n2.resolveReadyPromise(), n2.handleUpdateConfig();
          break;
        case ue.OPEN_APP:
          n2.openMiniapp(e3.params);
          break;
        case ue.OPEN_PAY_FORM:
          n2.openPayForm(e3.params);
          break;
        case ue.SET_TITLE:
          n2.setTitle(e3.params);
          break;
        case ue.AUTH_BY_EXCHANGE_TOKEN:
          n2.onAuthByExchangeToken();
          break;
        case ue.FORCE_LOGOUT:
          n2.onForceLogout();
          break;
        case pe.SUPERAPP_TOKEN:
          Ke._requestSuperAppToken(e3.params);
          break;
        case pe.AUTH_NEEDED:
          Ke._auth();
          break;
        default:
          n2.events.emit(le.MESSAGE, e3);
      }
    }, this.handleResize = function() {
      if (n2.iframe) {
        var e3 = innerWidth, t3 = innerHeight;
        n2.iframe.style.height = t3 + "px", n2.iframe.style.minHeight = t3 + "px", n2.bridge.sendMessage({ handler: ue.RESIZE, params: { viewport_width: e3, viewport_height: t3 } });
      }
    }, this.handleUpdateConfig = function() {
      n2.bridge.sendMessage({ handler: ue.APP_INIT_CONFIG, params: { fullMode: n2.params.fullMode, hideMenu: n2.params.hideMenu, scheme: n2.params.scheme } });
    }, this.update = function(e3) {
      e3 && (n2.params = H(n2.params, e3 || {}), n2.sendUpdateParamsMessage());
    }, this.getMiniAppUrl = function(e3, t3) {
      return Ke.fetchDomain().then(function() {
        var r3 = Ke.get(), o2 = r3.connectDomain, i2 = r3.appId, a2 = r3.superAppToken, s2 = r3._debug, c2 = r3._localhost;
        return "https://" + o2 + "/mini_app?" + K({ app: n2.params.app, host_app_id: i2, superapp_token: a2, app_query: e3 ? JSON.stringify(e3) : "", app_hash: t3 || "", debug: s2 ? 1 : null, localhost: c2 ? 1 : null });
      });
    }, this.resolveReadyPromise = function() {
      n2.readyPromise && n2.readyPromiseResolve && (n2.readyPromiseResolve(), n2.readyPromise = null, n2.readyPromiseResolve = null);
    }, this.openMiniapp = function(t3) {
      n2.child = new e2({ app: t3.app_id, stackMode: n2.params.stackMode }), n2.events.emit(le.CREATE_APP, { app: n2.child, location: t3.location });
    }, this.openPayForm = function(t3) {
      var r3 = he({}, t3.params);
      r3.data && (r3.data = JSON.stringify(r3.data));
      var o2 = he(he({}, r3), { app_id: t3.app_id, action: t3.action }), i2 = new e2({ app: 6217559, stackMode: n2.params.stackMode });
      i2.open(o2).then(function() {
        return n2.hide();
      }).catch(console.error), i2.events.on(le.MESSAGE, function(e3) {
        n2.handleVKPayFormMessage(e3), i2.close(), n2.show();
      }), i2.events.on(le.HIDE, function() {
        i2.close(), n2.close();
      });
    }, this.setTitle = function(e3) {
      window.document.title = e3.title;
    }, this.onAuthByExchangeToken = function() {
      n2.close({ closedByExchangeToken: true });
    }, this.onForceLogout = function() {
      n2.close({ closedByForceLogout: true });
    }, this.handleVKPayFormMessage = function(e3) {
      e3.handler === ue.ACTION_DONE && n2.sendMessage(e3), e3.handler === W.ERROR && n2.handleError(e3.params);
    };
    var r2 = be.validate(t2);
    !r2.isValid() && console.error(r2.error()), this.params = he(he({}, t2), { app: "number" == typeof t2.app ? "app" + t2.app : t2.app, scheme: "string" == typeof t2.scheme ? t2.scheme : "bright_light" }), this.events = fe();
  }
  return e2.prototype.on = function(e3, t2) {
    var n2 = Ce.validate({ event: e3, handler: t2 });
    !n2.isValid() && console.error(n2.error()), this.events.on(e3, t2);
  }, e2.prototype.off = function(e3, t2) {
    var n2 = Ce.validate({ event: e3, handler: t2 });
    !n2.isValid() && console.error(n2.error()), this.events.off(e3, t2);
  }, e2.prototype.sendUpdateParamsMessage = function() {
    this.bridge && this.bridge.sendMessage({ params: this.params, handler: W.UPDATE_PARAMS });
  }, e2;
}();
var tt = function() {
  function e2() {
    this.stack = [];
  }
  return e2.prototype.removeMiniApp = function(e3) {
    var t2 = e3.app, n2 = this.stack.lastIndexOf(t2);
    if (n2 > -1 && n2 === this.stack.length - 1)
      if (this.stack.splice(n2, 1), this.stack.length) {
        this.stack[this.stack.length - 1].show();
        var r2 = this.stack[this.stack.length - 2];
        setTimeout(function() {
          return null == r2 ? void 0 : r2.hide();
        }, 0);
      } else
        q.restoreBodyOverflow();
  }, e2.prototype.makeHandleMiniAppClose = function(e3) {
    var t2 = this, n2 = e3.app;
    return function() {
      t2.removeMiniApp({ app: n2 });
    };
  }, e2.prototype.makeHandleMiniAppHide = function(e3) {
    var t2 = this, n2 = e3.app;
    return function() {
      var e4 = t2.stack.lastIndexOf(n2);
      e4 > -1 && e4 === t2.stack.length - 1 && setTimeout(function() {
        return n2.close();
      }, 0);
    };
  }, e2.prototype.handleMiniAppCreate = function(e3) {
    var t2 = e3.app, n2 = e3.query, r2 = e3.hash;
    this.stack.push(t2), t2.open(n2, r2).catch(console.error), t2.events.on(le.CREATE_APP, this.handleMiniAppCreate.bind(this)), t2.events.on(le.HIDE, this.makeHandleMiniAppHide({ app: t2 })), t2.events.on(le.CLOSE, this.makeHandleMiniAppClose({ app: t2 })), q.freezeBodyOverflow();
    var o2 = this.stack[this.stack.length - 2];
    return setTimeout(function() {
      null == o2 || o2.hide();
    }, 0), t2;
  }, Object.defineProperty(e2.prototype, "length", { get: function() {
    return this.stack.length;
  }, enumerable: false, configurable: true }), e2.prototype.open = function(e3) {
    var t2 = be.validate(e3);
    !t2.isValid() && console.error(t2.error());
    var n2 = e3.app, r2 = e3.query, o2 = e3.hash, i2 = new et({ app: n2, stackMode: true });
    return this.handleMiniAppCreate({ app: i2, query: r2, hash: o2 }), i2;
  }, e2.prototype.close = function() {
    var e3 = this.stack;
    this.stack.splice(0), e3.reverse().forEach(function(e4) {
      return e4.close();
    }), q.restoreBodyOverflow();
  }, e2;
}();
!function(e2) {
  e2.STATIC_MAP = "VKSDKRequestToGeoservice:staticmap/png/", e2.SEARCH = "VKSDKRequestToGeoservice:search", e2.OVERALL = "VKSDKRequestToGeoservice:overall", e2.DIRECTIONS = "VKSDKRequestToGeoservice:directions", e2.ISO = "VKSDKRequestToGeoservice:iso";
}(Xe || (Xe = {}));
var nt;
var rt;
var ot;
var it;
var at;
var st;
var ct = function() {
  function e2(e3) {
    var t2 = this;
    this.apiKey = e3.apiKey, this.requestMap = {};
    var n2 = document.createElement("iframe");
    this.iframe = n2, Ke.fetchDomain().then(function() {
      var e4 = Ke.get().appId;
      t2.getGeoserviceProxyUrl({ app_id: e4 }).then(function(e5) {
        n2.src = e5;
      }), n2.style.cssText = "\n      display: none;\n    ", document.body.appendChild(t2.iframe), t2.bridge = new He({ iframe: t2.iframe, origin: "https://" + Ke.get().connectDomain }), t2.bridge.onMessage(function(e5) {
        var n3 = e5.params, r2 = n3.requestID, o2 = n3.response;
        t2.requestMap[r2].resolve(o2), delete t2.requestMap[r2];
      });
    });
  }
  return e2.prototype.setApiKey = function(e3) {
    this.apiKey = e3;
  }, e2.prototype.getGeoserviceProxyUrl = function(e3) {
    return Ke.fetchDomain().then(function() {
      var t2 = Ke.get(), n2 = t2.connectDomain, r2 = t2._debug, o2 = t2._localhost;
      return "https://" + n2 + "/geoservice?" + K(he(he({}, e3 || {}), { origin: location.protocol + "//" + location.host, debug: r2 ? 1 : null, localhost: o2 ? 1 : null }));
    });
  }, e2.prototype.prepareAnswer = function(e3, t2, n2) {
    var r2 = this, o2 = I();
    return this.bridge.sendMessage({ handler: "VKSDKRequestToGeoservice:" + e3, params: he(he({}, t2), { api_key: this.apiKey, wrapRequestInJSON: n2, requestID: o2 }) }), new Promise(function(e4, t3) {
      r2.requestMap[o2] = { resolve: e4, reject: t3 };
    });
  }, e2.prototype.getStaticMap = function(e3) {
    return this.prepareAnswer("staticmap/png/", e3);
  }, e2.prototype.encodeCoords = function(e3) {
    return this.prepareAnswer("search", e3);
  }, e2.prototype.decodeCoords = function(e3) {
    return this.prepareAnswer("overall", e3);
  }, e2.prototype.getDirections = function(e3) {
    return this.prepareAnswer("directions", e3, true);
  }, e2.prototype.getISO = function(e3) {
    return this.prepareAnswer("iso", e3, true);
  }, e2;
}();
!function(e2) {
  e2.SHOW_DATA_POLICY = "VKSDKOneTapAuthConnectDataPolicy", e2.HIDE_DATA_POLICY = "VKSDKOneTapAuthDataPolicyClose", e2.DATA_POLICY_RESULT = "VKSDKOneTapAuthDataPolicyResult", e2.SHOW_CAPTCHA = "VKSDKOneTapAuthDataPolicyShowCaptcha";
}(nt || (nt = {})), function(e2) {
  e2.SHOW_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsShow", e2.HIDE_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsHide", e2.ACCEPT_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsAccept", e2.DECLINE_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsDecline", e2.POLICY_AGREEMENTS_ERROR = "VKSDKOneTapAuthPolicyAgreementsError", e2.SHOW_DATA_POLICY = "VKSDKOneTapAuthPolicyAgreementsShowDataPolicy", e2.GET_CAPTCHA = "VKSDKGetCaptcha", e2.CAPTCHA_SUCCESS = "VKSDKGetCaptchaSuccess", e2.CAPTCHA_FAIL = "VKSDKGetCaptchaFail";
}(rt || (rt = {})), function(e2) {
  e2.PHONE_VALIDATION_NEEDED = "VKSDKOneTapAuthPhoneValidationNeeded", e2.FULL_AUTH_NEEDED = "VKSDKOneTapAuthFullAuthNeeded", e2.AUTH_DATA_LOADED = "VKSDKOneTapAuthDataLoaded", e2.NOT_AUTHORIZED = "VKSDKOneTapAuthNotAuthorized", e2.LOGIN_SUCCESS = "VKSDKOneTapAuthLoginSuccess", e2.LOGIN_FAILED = "VKSDKOneTapAuthLoginFailed", e2.RESIZE_FRAME = "VKSDKOneTapResizeFrame", e2.SHOW_CAPTCHA = "VKSDKOneTapShowCaptcha", e2.VALIDATE_CAPTCHA = "VKSDKOneTapValidateCaptcha", e2.UPDATE_PARAMS = "VKSDKUpdateParams", e2.AUTHORIZE_NEEDED = "VKSDKButtonOneTapAuthAuthorizeNeeded";
}(ot || (ot = {})), function(e2) {
  e2.CLOSE_AUTH = "VKSDKOneTapAuthClose", e2.ADAPTIVITY_CHANGE = "VKSDKFloatingOneTapAdaptivityChange", e2.ADAPTIVITY_CHANGED = "VKSDKFloatingOneTapAdaptivityChanged", e2.UPDATE_PARAMS = "VKSDKUpdateParams";
}(it || (it = {})), function(e2) {
  e2.SHOW_LOGIN = "VKSDKButtonOneTapAuthShowLogin", e2.SHOW_LOGIN_OPTIONS = "VKSDKButtonOneTapAuthShowLoginOptions", e2.SHOW_AGREEMENTS_DIALOG = "VKSDKButtonOneTapAuthShowAgreementsDialog", e2.START_AUTHORIZE = "VKSDKButtonOneTapAuthStartAuthorize", e2.UPDATE_PARAMS = "VKSDKUpdateParams";
}(at || (at = {})), function(e2) {
  e2.WRONG_TOKEN = "VKSDKBindAccountErrorWrongToken", e2.ALREADY_BIND = "VKSDKBindAccountErrorAlreadyBind";
}(st || (st = {}));
var ut;
var lt = new Oe({ url: [{ rule: ve, errorText: re("url") }, { rule: ge, errorText: oe("url") }] });
var pt = new Oe({ uuid: [{ rule: ve, errorText: re("uuid") }, { rule: ge, errorText: oe("uuid") }] });
var dt = (new Oe({ params: [{ rule: ge, errorText: oe("params") }] }), new Oe({ callback: [{ rule: ge, errorText: oe("callback") }] }));
var ht = function() {
  function e2() {
  }
  return e2.log = function() {
    for (var e3 = [], t2 = 0; t2 < arguments.length; t2++)
      e3[t2] = arguments[t2];
  }, e2;
}();
var ft = new Oe({ params: [{ rule: ge, errorText: oe("params") }] });
var mt = function() {
  function e2() {
    var e3 = this;
    this.config = {}, this.params = {}, this.loadingTask = new Ge(), this.initTask = new Ge(), this.cssText = "", this.handleError = function(t2) {
      var n2 = Ee(ye(z[z.CUSTOM], z.CUSTOM, "", t2));
      e3.events.emit(W.ERROR, n2);
    }, this.events = fe(), this.handleBridgeMessage = this.handleBridgeMessage.bind(this), this.handleChangeSuperAppToken = this.handleChangeSuperAppToken.bind(this), this.close = this.close.bind(this), this.handleLogout = this.handleLogout.bind(this);
  }
  return e2.prototype.preload = function(e3) {
    var t2 = this;
    return Ke.fetchDomain().then(function() {
      return t2.validateParams(e3).then(function() {
        return t2.updateParams(e3), t2.createIframe().then(function() {
          return t2.initTask.start(), t2.loadingTask.start(), t2.timeoutTimer = setTimeout(function() {
            if (!t2.initTask.finished) {
              var e4 = Ee(ye(z[z.LOADING_ERROR], z.LOADING_ERROR, te()));
              t2.initTask.reject(e4);
            }
          }, 5e3), t2.iframe.onload = function() {
            t2.iframe.onload = null, t2.loadingTask.resolve();
          }, t2.bridge = new He({ iframe: t2.iframe, origin: "https://" + Ke.get().connectDomain }), t2.bridge.onMessage(t2.handleBridgeMessage), Ke.events.on(de.SUPERAPP_TOKEN_CHANGE_V2, t2.handleChangeSuperAppToken), Ke.events.on(W.LOGOUT, t2.close), t2.getIframeContainer().appendChild(t2.iframe), t2.loadingTask.get();
        });
      });
    });
  }, e2.prototype.open = function(e3) {
    var t2 = this;
    return this.validateParams(e3).then(function() {
      return t2.initTask.finished ? (t2.updateParams(e3), Promise.resolve()) : t2.initTask.active || t2.initTask.finished ? (t2.updateParams(e3), t2.initTask.get()) : t2.preload(e3).then(function() {
        return t2.initTask.get();
      });
    });
  }, e2.prototype.update = function(e3, t2) {
    e3 && this.updateParams(e3), t2 && this.updateConfig(t2);
  }, e2.prototype.close = function() {
    this.iframe && (this.iframe.onload = null, this.iframe.remove()), this.bridge && this.bridge.destroy(), Ke.events.off(de.SUPERAPP_TOKEN_CHANGE_V2, this.handleChangeSuperAppToken), Ke.events.off(W.LOGOUT, this.close), delete this.iframe, delete this.bridge, this.loadingTask = new Ge(), this.initTask = new Ge(), this.events.emit(W.CLOSE);
  }, e2.prototype.sendMessage = function(e3) {
    var t2 = Pe.validate({ message: e3 });
    !t2.isValid() && console.error(t2.error()), this.bridge.sendMessage(e3);
  }, e2.prototype.on = function(e3, t2) {
    var n2 = Ce.validate({ event: e3, handler: t2 });
    !n2.isValid() && console.error(n2.error()), this.events.on(e3, t2);
  }, e2.prototype.off = function(e3, t2) {
    var n2 = Ce.validate({ event: e3, handler: t2 });
    !n2.isValid() && console.error(n2.error()), this.events.off(e3, t2);
  }, e2.prototype.handleInit = function() {
    this.initTask.finished || (clearTimeout(this.timeoutTimer), this.initTask.resolve()), this.sendUpdateParamsMessage(), this.iframe.style.display = "block";
  }, e2.prototype.handleRequestAuth = function() {
    Ke._auth({ version: 2 });
  }, e2.prototype.handleRequestSuperAppToken = function(e3) {
    Ke._requestSuperAppToken(e3, { version: 2 });
  }, e2.prototype.handleChangeSuperAppToken = function(e3) {
    this.bridge.sendMessage({ handler: W.REQUEST_SUPERAPP_TOKEN + "Success", params: { result: e3 } });
  }, e2.prototype.handleBridgeMessage = function(e3) {
    switch (ht.log(e3), e3.handler) {
      case F.INIT:
        this.handleInit();
        break;
      case W.REQUEST_SUPERAPP_TOKEN:
        this.handleRequestSuperAppToken(e3.params);
        break;
      case W.AUTH_NEEDED:
        this.handleRequestAuth();
        break;
      case W.CLOSE:
        this.close();
        break;
      case W.ERROR:
        this.handleError(e3.params);
        break;
      default:
        return;
    }
  }, e2.prototype.handleLogout = function() {
    Ke._logout();
  }, e2.prototype.handleAfterUpdateParams = function() {
    this.sendUpdateParamsMessage();
  }, e2.prototype.handleAfterUpdateConfig = function() {
  }, e2.prototype.handleAfterCreateIframe = function() {
  }, e2.prototype.validateParams = function(e3) {
    var t2 = ft.validate({ params: e3 });
    return !t2.isValid() && console.error(t2.error()), Promise.resolve(e3);
  }, e2.prototype.createIframe = function() {
    var e3 = this;
    return this.getIframeUrl().then(function(t2) {
      return e3.iframe = U(t2, { cssText: e3.cssText }), e3.handleAfterCreateIframe(), Promise.resolve();
    });
  }, e2.prototype.getIframeUrl = function() {
    return new Promise(function(e3) {
      return e3("");
    });
  }, e2.prototype.getIframeContainer = function() {
    return window.document.body;
  }, e2.prototype.getIframeUrlParams = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      var t2 = Ke.get(), n2 = t2.superAppTokenV2, r2 = t2.appId, o2 = t2._debug, i2 = t2._localhost;
      return Promise.resolve(K(he(he({}, e3.params), { host_app_id: r2, superapp_token: n2, origin: location.protocol + "//" + location.host, debug: o2 ? 1 : null, localhost: i2 ? 1 : null })));
    });
  }, e2.prototype.updateConfig = function(e3) {
    this.config = H(this.config, e3), this.handleAfterUpdateConfig();
  }, e2.prototype.updateParams = function(e3) {
    this.params = H(this.params, e3 || {}), this.handleAfterUpdateParams();
  }, e2.prototype.sendUpdateParamsMessage = function() {
    this.bridge && this.initTask.finished && this.bridge.sendMessage({ params: this.params, handler: W.UPDATE_PARAMS });
  }, e2;
}();
!function(e2) {
  e2.CLOSE = "VKSDKAuthorizeClose", e2.FAILED = "VKSDKAuthorizeFailed", e2.SUCCESS = "VKSDKAuthorizeSuccess";
}(ut || (ut = {}));
var vt = new Oe({ scope: [{ rule: ge, errorText: oe("scope") }, { rule: ve, errorText: re("scope") }] });
var gt = function(e2) {
  function t2(t3) {
    var n2 = e2.call(this) || this;
    n2.cssText = "\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 9999;\n    border: none;\n    display: none;\n  ";
    var r2 = vt.validate({ scope: t3.scope });
    return !r2.isValid() && console.error(r2.error()), n2.updateConfig(t3), n2;
  }
  return ce(t2, e2), t2.prototype.handleBridgeMessage = function(t3) {
    switch (e2.prototype.handleBridgeMessage.call(this, t3), t3.handler) {
      case ut.SUCCESS:
        t3.params.code_verifier = this.codeVerifier, this.events.emit(ut.SUCCESS, t3);
        break;
      case ut.FAILED:
        this.events.emit(ut.FAILED, t3);
        break;
      case ut.CLOSE:
        this.close();
        break;
      default:
        return;
    }
  }, t2.prototype.getIframeUrlParams = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      var t3, n2, r2, o2 = Ke.get(), i2 = o2.appId, a2 = o2._debug, s2 = o2._localhost, c2 = I();
      return Promise.resolve(K(he(he({}, e3.params), { debug: a2 ? 1 : null, localhost: s2 ? 1 : null, client_id: i2, code_challenge: e3.codeChallenge, code_challenge_method: "s256", response_type: "code", state: c2, origin: location.protocol + "//" + location.host, redirect_uri: null !== (t3 = e3.config.redirect_uri) && void 0 !== t3 ? t3 : location.protocol + "//" + location.host, device_id: null !== (n2 = e3.config.device_id) && void 0 !== n2 ? n2 : "", scope: null !== (r2 = e3.config.scope) && void 0 !== r2 ? r2 : "" })));
    });
  }, t2.prototype.open = function(t3) {
    return void 0 === t3 && (t3 = {}), this.codeVerifier = Y(), this.codeChallenge = j(this.codeVerifier), e2.prototype.open.call(this, t3);
  }, t2.prototype.getIframeUrl = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      return e3.getIframeUrlParams().then(function(e4) {
        var t3 = Ke.get().connectDomain;
        return Promise.resolve("https://" + t3 + "/authorize?" + e4);
      });
    });
  }, t2.prototype.handleAfterUpdateConfig = function() {
    this.updateZIndex();
  }, t2.prototype.handleAfterCreateIframe = function() {
    this.updateZIndex();
  }, t2.prototype.updateZIndex = function() {
    if (this.iframe) {
      var e3 = this.config.zIndex;
      this.iframe.style.zIndex = "" + e3;
    }
  }, t2;
}(mt);
var _t = function() {
  function e2() {
  }
  var n2;
  return e2.on = function(e3, t2) {
    var n3 = Ce.validate({ event: e3, handler: t2 });
    !n3.isValid() && console.error(n3.error()), this.events.on(e3, t2);
  }, e2.off = function(e3, t2) {
    var n3 = Ce.validate({ event: e3, handler: t2 });
    !n3.isValid() && console.error(n3.error()), this.events.off(e3, t2);
  }, n2 = e2, e2.flags = null, e2.events = fe(), e2.handleError = function(e3) {
    var t2 = Ee(ye(z[z.CUSTOM], z.CUSTOM, "", e3));
    n2.events.emit(W.ERROR, t2);
  }, e2.silentAuth = function() {
    return Ke.fetchDomain().then(function() {
      var e3 = Ke.get(), t2 = e3.loginDomain, n3 = e3.appId, r2 = new Ge(), o2 = I(), i2 = "https://" + t2 + "/?act=connect&app_id=" + n3 + "&response_type=silent_token&uuid=" + o2 + "&v=1.60.0", a2 = new XMLHttpRequest();
      return a2.open("GET", i2, true), a2.responseType = "json", a2.withCredentials = true, r2.start(), a2.onload = function() {
        var e4, t3 = a2.response, n4 = a2.status >= 200 && a2.status < 300;
        if (t3 && (null === (e4 = t3.error) || void 0 === e4 ? void 0 : e4.error_code) === z.CAPTCHA_ERROR) {
          var s2 = t3.error, c2 = s2.captcha_sid, u2 = s2.captcha_img;
          new $e(o2, { captcha_sid: c2, captcha_img: u2 }).show().then(function(e5) {
            var t4 = i2 + "&captcha_key=" + e5.captcha_key + "&captcha_sid=" + e5.captcha_sid;
            a2.open("GET", t4, true), a2.send();
          });
        } else
          t3 && n4 ? r2.resolve({ provider: "vk", payload: a2.response }) : r2.reject();
      }, a2.onerror = function() {
        r2.reject();
      }, a2.send(), r2.get();
    });
  }, e2.oneTapAuth = function(t2, n3) {
    if (console.warn("Connect.oneTapAuth method is deprecated. Use Connect.floatingOneTapAuth and Connect.buttonOneTapAuth methods."), !["floating", "button"].includes(t2))
      return null;
    switch (t2) {
      case "button":
        return e2.buttonOneTapAuth(n3);
      case "floating":
        return e2.floatingOneTapAuth(n3);
      default:
        return null;
    }
  }, e2.floatingOneTapAuth = function(t2) {
    var r2 = dt.validate({ callback: t2.callback });
    !r2.isValid() && console.error(r2.error());
    var o2 = function() {
      var e3, t3 = window.innerWidth, n3 = t3 <= 768;
      return { destroy: function() {
        return window.removeEventListener("resize", e3);
      }, isAdaptive: function() {
        return n3;
      }, observe: function(r3) {
        e3 = function() {
          var e4 = window.innerWidth;
          t3 > 768 && e4 <= 768 ? r3(n3 = true) : t3 <= 768 && e4 > 768 && r3(n3 = false), t3 = e4;
        }, window.addEventListener("resize", e3);
      } };
    }(), i2 = function(e3, t3) {
      var n3, r3, o3, i3 = {}, a3 = e3 ? "314px" : "334px", s3 = e3 ? "\n      display: none;\n      position: fixed;\n      bottom: 0;\n      right: 50%;\n      transform: translate(50%, 0);\n      max-width: 468px;\n      width: 100%;\n      height: " + a3 + ";\n    " : "\n        display: none;\n        position: fixed;\n        top: 0;\n        right: 0;\n        max-width: 400px;\n        width: 100%;\n        height: " + a3 + ";\n      ";
      return (null === (n3 = null == t3 ? void 0 : t3.styles) || void 0 === n3 ? void 0 : n3.zIndex) && isFinite(null === (r3 = null == t3 ? void 0 : t3.styles) || void 0 === r3 ? void 0 : r3.zIndex) && (s3 += "z-index: " + (null === (o3 = null == t3 ? void 0 : t3.styles) || void 0 === o3 ? void 0 : o3.zIndex) + ";"), t3 && (i3.skip_success = G(t3.skipSuccess, 0), void 0 !== t3.scheme && ["bright_light", "space_gray"].includes(t3.scheme) && (i3.scheme = t3.scheme)), { pageUrl: "floating_one_tap_auth", pageUrlParams: he({ adaptive: e3 ? 1 : 0 }, i3), frameStyles: s3, scheme: (null == t3 ? void 0 : t3.scheme) || "bright_light" };
    }(o2.isAdaptive(), t2.options), a2 = Y(), s2 = j(a2);
    if (!i2)
      throw new Error("options were not set");
    var c2, u2, l2, p2 = I(), d2 = he({ origin: location.protocol + "//" + location.host, uuid: p2 }, i2.pageUrlParams), h2 = i2.pageUrl, f2 = new Ge(), m2 = function() {
      u2 && u2.sendMessage({ handler: ot.RESIZE_FRAME, params: { uuid: p2 } });
    }, v2 = function() {
      c2 && (c2.remove(), c2 = null), window.removeEventListener("resize", m2), o2 && o2.destroy(), u2 && u2.destroy();
    };
    l2 = new Promise(function(e3) {
      f2.start(), f2.get().then(function(t3) {
        e3(t3);
      });
    });
    var g2 = function(r3) {
      var o3 = r3.params.uuid === p2;
      if (r3.params.code_verifier = a2, o3)
        switch (r3.handler) {
          case W.ERROR:
            n2.handleError(r3.params);
            break;
          case ot.NOT_AUTHORIZED:
            t2.callback({ type: r3.handler, payload: { uuid: p2, error: "not_authorized" } }), v2(), f2.resolve(r3.handler);
            break;
          case ot.RESIZE_FRAME:
            c2.style.height = r3.params.height + "px";
            break;
          case it.CLOSE_AUTH:
            t2.callback({ type: r3.handler, payload: { uuid: p2 } }), v2();
            break;
          case it.ADAPTIVITY_CHANGED:
            c2.style.display = "block";
            break;
          case ot.AUTH_DATA_LOADED:
            c2.style.display = "block", f2.resolve(r3.handler);
          default:
            e2.handleOneTapEvents(r3, u2, t2);
        }
    };
    return c2 = U("", { cssText: null == i2 ? void 0 : i2.frameStyles }), document.body.appendChild(c2), Ke.fetchDomain().then(function() {
      return ze(he(he({}, d2), { code_challenge: s2, code_challenge_method: "s256" }), h2).then(function(e3) {
        c2.src = e3, (u2 = new He({ iframe: c2, origin: "https://" + Ke.get().connectDomain })).onMessage(g2), o2.observe(function(e4) {
          u2.sendMessage({ handler: it.ADAPTIVITY_CHANGE, params: { uuid: p2, is_adaptive: e4 } }), e4 ? (c2.style.maxWidth = "468px", c2.style.top = "auto", c2.style.bottom = "0", c2.style.right = "50%", c2.style.transform = "translate(50%, 0)") : (c2.style.maxWidth = "400px", c2.style.top = "0", c2.style.bottom = "auto", c2.style.right = "0", c2.style.transform = "none"), c2.style.display = "none";
        }), window.addEventListener("resize", m2);
      });
    }), { getFrame: function() {
      return c2;
    }, destroy: v2, authReadyPromise: l2, update: function(e3) {
      i2 = H(i2 || {}, e3), u2 && i2 && u2.sendMessage({ handler: it.UPDATE_PARAMS, params: i2 });
    } };
  }, e2.buttonOneTapAuth = function(t2) {
    var n3 = dt.validate({ callback: t2.callback });
    !n3.isValid() && console.error(n3.error());
    var o2 = function(e3) {
      var t3, n4, o3, i3, a3, s3, c3 = {}, u3 = 44, l3 = 56;
      return e3 && (c3.display = e3.displayMode && Ze.includes(e3.displayMode) ? e3.displayMode : je.Default, c3.button_skin = e3.buttonSkin && Je.includes(e3.buttonSkin) ? e3.buttonSkin : qe.Primary, c3.show_agreements = G(e3.showAgreements, 0), c3.show_alternative_login = G(e3.showAlternativeLogin, 0), void 0 !== e3.scheme && ["bright_light", "space_gray"].includes(e3.scheme) && (c3.scheme = e3.scheme), void 0 !== (null === (t3 = e3.buttonStyles) || void 0 === t3 ? void 0 : t3.height) && (u3 = Number(null === (n4 = e3.buttonStyles) || void 0 === n4 ? void 0 : n4.height), l3 = Number(null === (o3 = e3.buttonStyles) || void 0 === o3 ? void 0 : o3.height) + 12, c3.style_height = null === (i3 = e3.buttonStyles) || void 0 === i3 ? void 0 : i3.height), void 0 !== (null === (a3 = e3.buttonStyles) || void 0 === a3 ? void 0 : a3.borderRadius) && (c3.style_border_radius = null === (s3 = e3.buttonStyles) || void 0 === s3 ? void 0 : s3.borderRadius), void 0 !== e3.langId && (c3.lang_id = Ye.includes(e3.langId) ? e3.langId : r), u3 += c3.show_alternative_login ? l3 : 0, u3 += c3.show_agreements ? 80 : 0), { pageUrl: "button_one_tap_auth", pageUrlParams: c3, frameStyles: "\n        height: " + u3 + "px;\n      ", scheme: (null == e3 ? void 0 : e3.scheme) || "bright_light" };
    }(t2.options), i2 = Y(), a2 = j(i2);
    if (!o2)
      throw new Error("options were not set");
    var s2, c2, u2, l2 = I(), p2 = he({ origin: location.protocol + "//" + location.host, uuid: l2 }, o2.pageUrlParams), d2 = o2.pageUrl, h2 = new Ge();
    u2 = new Promise(function(e3) {
      h2.start(), h2.get().then(function(t3) {
        e3(t3);
      });
    });
    var f2 = function() {
      c2 && c2.sendMessage({ handler: ot.RESIZE_FRAME, params: { uuid: l2 } });
    }, m2 = function(n4) {
      var r2 = n4.params.uuid === l2;
      if (n4.params.code_verifier = i2, r2)
        switch (n4.handler) {
          case ot.RESIZE_FRAME:
            s2.style.height = n4.params.height + "px";
            break;
          case ot.NOT_AUTHORIZED:
            h2.resolve(n4.handler);
            break;
          case at.SHOW_LOGIN:
          case at.SHOW_LOGIN_OPTIONS:
            t2.callback({ type: n4.handler, payload: { uuid: l2 } });
            break;
          case at.SHOW_AGREEMENTS_DIALOG:
            e2.userPolicyAgreements(l2, null == o2 ? void 0 : o2.scheme).show().then(function(e3) {
              e3 && e3.accepted && c2.sendMessage({ handler: at.START_AUTHORIZE, params: { uuid: l2 } });
            }).catch(function() {
              c2.sendMessage({ handler: rt.DECLINE_POLICY_AGREEMENTS, params: { uuid: l2 } });
            });
            break;
          case ot.AUTH_DATA_LOADED:
            h2.resolve(n4.handler);
          default:
            e2.handleOneTapEvents(n4, c2, t2);
        }
    };
    s2 = U("", { cssText: null == o2 ? void 0 : o2.frameStyles });
    var v2 = t2.container;
    return v2 && v2.appendChild(s2), Ke.fetchDomain().then(function() {
      return ze(he(he({}, p2), { code_challenge: a2, code_challenge_method: "s256" }), d2).then(function(e3) {
        s2.src = e3, (c2 = new He({ iframe: s2, origin: "https://" + Ke.get().connectDomain })).onMessage(m2), window.addEventListener("resize", f2);
      });
    }).catch(console.error), { getFrame: function() {
      return s2;
    }, destroy: function() {
      s2 && (s2.remove(), s2 = null), window.removeEventListener("resize", f2), c2 && c2.destroy();
    }, authReadyPromise: u2, update: function(e3) {
      o2 = H(o2 || {}, e3), c2 && o2 && c2.sendMessage({ handler: at.UPDATE_PARAMS, params: o2 });
    } };
  }, e2.handleOneTapEvents = function(t2, r2, o2) {
    var i2, a2, s2 = t2.params.uuid;
    switch (t2.handler) {
      case W.ERROR:
        n2.handleError(t2.params);
        break;
      case ot.AUTH_DATA_LOADED:
        r2.sendMessage({ handler: ot.RESIZE_FRAME, params: { uuid: s2 } });
        break;
      case ot.LOGIN_SUCCESS:
        o2.callback({ type: t2.handler, provider: "vk", payload: t2.params });
        break;
      case ot.SHOW_CAPTCHA:
        var c2 = new $e(s2, { captcha_sid: t2.params.captcha_sid, captcha_img: t2.params.captcha_img }, null === (i2 = o2.options) || void 0 === i2 ? void 0 : i2.scheme);
        c2.show().then(function(e3) {
          r2.sendMessage({ handler: Qe.CAPTCHA_SUCCESS, params: he({ uuid: s2 }, e3) });
        }).catch(function() {
          r2.sendMessage({ handler: Qe.CAPTCHA_FAIL, params: { uuid: s2 } }), c2.destroy();
        });
        break;
      case nt.SHOW_DATA_POLICY:
        e2.userDataPolicy(s2, null === (a2 = o2.options) || void 0 === a2 ? void 0 : a2.scheme).show().then(function() {
          o2.callback({ type: nt.DATA_POLICY_RESULT, payload: { uuid: s2, policyAccepted: true } });
        }).catch(function() {
          o2.callback({ type: nt.DATA_POLICY_RESULT, payload: { uuid: s2, policyAccepted: false } });
        });
        break;
      case ot.AUTHORIZE_NEEDED:
        var u2 = { scope: t2.params.scope, device_id: t2.params.device_id }, l2 = new gt(u2);
        l2.open({}).catch(function(e3) {
          console.error(e3), l2.close();
        });
        var p2 = function e3(t3) {
          var n3 = t3.params, r3 = n3.uuid, i3 = n3.code, a3 = n3.code_verifier, s3 = r3 && i3 ? ot.LOGIN_SUCCESS : ot.LOGIN_FAILED;
          o2.callback({ type: s3, provider: "vk", payload: { code: i3, state: r3, code_verifier: a3 } }), l2.close(), l2.off(ut.SUCCESS, e3), l2.off(ut.FAILED, e3);
        };
        l2.on(ut.SUCCESS, p2), l2.on(ut.FAILED, p2);
        break;
      case ot.FULL_AUTH_NEEDED:
      case ot.PHONE_VALIDATION_NEEDED:
        o2.callback({ type: t2.handler, payload: { uuid: s2 } });
    }
  }, e2.userDataPolicy = function(e3, t2) {
    var r2, o2 = pt.validate({ uuid: e3 });
    !o2.isValid() && console.error(o2.error());
    var i2, a2 = window.innerHeight, s2 = function() {
      r2 && (r2.style.display = "none");
    }, c2 = new Ge(), u2 = function() {
      r2 && r2.remove(), i2 && i2.destroy();
    };
    r2 = U("", { properties: { height: a2 + "px" }, cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      min-height: 100vh;\n      border: none;\n      z-index: 99999;\n    " }), document.body.appendChild(r2);
    var l2 = function(o3) {
      switch (o3.handler) {
        case W.ERROR:
          n2.handleError(o3.params);
          break;
        case nt.HIDE_DATA_POLICY:
          s2(), c2.resolve(void 0), u2();
          break;
        case nt.SHOW_CAPTCHA:
          var a3 = new $e(e3, { captcha_sid: o3.params.captcha_sid, captcha_img: o3.params.captcha_img }, t2);
          a3.show().then(function(t3) {
            i2.sendMessage({ handler: Qe.CAPTCHA_SUCCESS, params: he({ uuid: e3 }, t3) }), r2.style.display = "block";
          }).catch(function() {
            i2.sendMessage({ handler: Qe.CAPTCHA_FAIL, params: { uuid: e3 } }), a3.destroy();
          }), s2();
          break;
        default:
          s2(), c2.reject(), u2();
      }
    };
    return Ke.fetchDomain().then(function() {
      ze({ origin: location.protocol + "//" + location.host, uuid: e3, scheme: t2 || "bright_light" }, "user_data_policy").then(function(e4) {
        r2.src = e4;
      }), (i2 = new He({ iframe: r2, origin: "https://" + Ke.get().connectDomain })).onMessage(l2);
    }), { show: function() {
      return r2.style.display = "block", new Promise(function(e4) {
        c2.start(), c2.get().then(function(t3) {
          e4(t3);
        });
      });
    }, hide: s2, destroy: u2 };
  }, e2.userPolicyAgreements = function(t2, r2) {
    var o2, i2, a2, s2, c2 = new Ge();
    a2 = "", s2 = window.innerHeight, o2 = U(a2, { properties: { height: s2 + "px" }, cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + s2 + "px;\n      min-height: " + s2 + "px;\n      border: none;\n      z-index: 99999;\n    " }), document.body.appendChild(o2);
    var u2 = function() {
      o2 && (o2.remove(), o2 = null), i2 && i2.destroy();
    }, l2 = function() {
      o2 && (o2.style.display = "none");
    }, p2 = function(a3) {
      switch (a3.handler) {
        case W.ERROR:
          n2.handleError(a3.params);
          break;
        case rt.ACCEPT_POLICY_AGREEMENTS:
          l2(), c2.resolve({ accepted: true }), u2();
          break;
        case rt.DECLINE_POLICY_AGREEMENTS:
          l2(), c2.resolve({ accepted: false }), u2();
          break;
        case rt.GET_CAPTCHA:
          var s3 = new $e(t2, { captcha_sid: a3.params.captcha_sid, captcha_img: a3.params.captcha_img }, r2);
          s3.show().then(function(e3) {
            i2.sendMessage({ handler: rt.CAPTCHA_SUCCESS, params: he({ uuid: t2 }, e3) }), o2.style.display = "block";
          }).catch(function() {
            i2.sendMessage({ handler: rt.CAPTCHA_FAIL, params: { uuid: t2 } }), s3.destroy();
          }), l2();
          break;
        case rt.SHOW_DATA_POLICY:
          l2();
          var p3 = function() {
            o2.style.display = "block";
          };
          e2.userDataPolicy(t2, r2).show().then(p3).catch(p3);
          break;
        case rt.POLICY_AGREEMENTS_ERROR:
        case rt.HIDE_POLICY_AGREEMENTS:
        default:
          c2.reject(), u2();
      }
    };
    return Ke.fetchDomain().then(function() {
      ze({ origin: location.protocol + "//" + location.host, uuid: t2, scheme: r2 || "bright_light" }, "user_policy_agreements").then(function(e3) {
        o2.src = e3, (i2 = new He({ iframe: o2, origin: "https://" + Ke.get().connectDomain })).onMessage(p2);
      });
    }), { show: function() {
      return o2.style.display = "block", new Promise(function(e3) {
        c2.start(), c2.get().then(function(t3) {
          e3(t3);
        });
      });
    }, hide: l2, destroy: u2 };
  }, e2.userVisibleAuth = function(n3) {
    return Ke.fetchDomain().then(function() {
      var r2 = I(), o2 = Ke.get(), i2 = he(he({ origin: location.protocol + "//" + location.host, uuid: r2, debug: o2._debug ? 1 : null, localhost: o2._localhost ? 1 : null }, B(n3, ["screen", "source"])), { scheme: null == n3 ? void 0 : n3.scheme }), a2 = We(null == n3 ? void 0 : n3.action);
      a2 && (i2.action = a2);
      var s2 = Fe(null == n3 ? void 0 : n3.entry);
      return s2 && (i2.initial_stats_info = s2), ze(i2).then(function(n4) {
        e2.flags && (n4 = n4 + "#" + K(e2.flags));
        var o3 = screen.height / 2 - 280, i3 = screen.width / 2 - 410, a3 = window.open(n4, "_blank", "top=" + o3 + ",left=" + i3 + ",width=820,height=560,location");
        if (!a3) {
          var s3 = Ee(ye(z[z.CONNECT_WINDOW_NOT_OPENED], z.CONNECT_WINDOW_NOT_OPENED, Q()));
          return Promise.reject(s3);
        }
        return new Promise(function(e3, n5) {
          var o4 = setInterval(function() {
            if (!a3 || a3.closed) {
              window.removeEventListener("message", i4), clearInterval(o4);
              var e4 = Ee(ye(z[z.CONNECT_WINDOW_CLOSED], z.CONNECT_WINDOW_CLOSED, J()));
              n5(e4);
            }
          }, 1e3);
          function i4(s4) {
            if (s4.source === a3 && a3)
              if (window.removeEventListener("message", i4), clearInterval(o4), function(e4) {
                for (var n6 = 0; n6 < t.length; n6++) {
                  var r3 = t[n6];
                  if (e4.slice(e4.length - r3.length) === r3)
                    return true;
                }
                return false;
              }(s4.origin))
                if (s4.data.action === "vk_connect_response" + r2) {
                  var c2 = s4.data.payload;
                  if (a3.close(), c2.error) {
                    l2 = Ee(ye(z[z.CONNECT_CLIENT_SDK_ERROR], z.CONNECT_CLIENT_SDK_ERROR, ee(c2.error)));
                    n5(l2);
                  } else
                    e3({ provider: "vk", payload: c2 });
                } else if (s4.data.action === "oauth_callback" + r2)
                  e3({ provider: s4.data.payload.name }), a3.close();
                else if (s4.data.action === "skip_callback" + r2) {
                  var u2 = s4.data.payload.redirectURL;
                  u2 && (window.location.href = u2), a3.close();
                } else if (s4.data.action === "bind_ok_account" + r2)
                  e3(s4.data.payload), a3.close();
                else {
                  a3.close();
                  l2 = Ee(ye(z[z.CONNECT_UNKNOWN_SDK_MESSAGE], z.CONNECT_UNKNOWN_SDK_MESSAGE, $(JSON.stringify(s4.data))));
                  n5(l2);
                }
              else {
                a3.close();
                var l2 = Ee(ye(z[z.CONNECT_DOMAIN_NOT_ALLOWED], z.CONNECT_DOMAIN_NOT_ALLOWED, X(s4.origin)));
                n5(l2);
              }
          }
          window.addEventListener("message", i4);
        });
      });
    });
  }, e2.redirectAuth = function(e3) {
    var t2 = lt.validate(e3);
    !t2.isValid() && console.error(t2.error());
    var n3 = e3.code_verifier ? { code_challenge: j(e3.code_verifier), code_challenge_method: "s256" } : {}, r2 = I(), o2 = he(he(he({ redirect_uri: e3.url, uuid: r2 }, B(e3, ["screen", "source"])), { scheme: null == e3 ? void 0 : e3.scheme }), n3), i2 = We(null == e3 ? void 0 : e3.action);
    i2 && (o2.action = i2);
    var a2 = Fe(null == e3 ? void 0 : e3.entry);
    a2 && (o2.initial_stats_info = a2), (null == e3 ? void 0 : e3.state) && (o2.redirect_state = e3.state), ze(o2).then(function(e4) {
      location.assign(e4);
    });
  }, e2.logout = function() {
    return Ke.fetchDomain().then(function() {
      var e3 = Ke.get(), t2 = e3.connectDomain, n3 = e3.appId, r2 = e3.superAppTokenV2;
      if (!r2)
        return Promise.reject(Z("superappToken", "SuperappToken is undefined"));
      var o2 = K({ origin: location.protocol + "//" + location.host, host_app_id: n3, superapp_token: r2 }), i2 = fetch("https://" + t2 + "/logout?" + o2, { credentials: "include" });
      return Ke.events.emit(W.LOGOUT), Ke.setSuperAppToken(""), Ke.setSuperAppToken("", { version: 2 }), i2;
    });
  }, e2;
}();
var yt = { OneTapAuthEventsSDK: ot, FloatingOneTapAuthEventsSDK: it, ButtonOneTapAuthEventsSDK: at, DataPolicyEventsSDK: nt };
var At = ["open_account"];
var Et;
var Tt;
var St = function() {
  function e2() {
  }
  return e2.open = function(e3) {
    var t2 = we.validate({ token: e3.action.token });
    return !t2.isValid() && console.error(t2.error()), Ke.fetchDomain().then(function() {
      var t3, n2 = I(), r2 = Ke.get(), o2 = he({ origin: location.protocol + "//" + location.host, uuid: n2, debug: G(r2._debug, 0), localhost: G(r2._localhost, 0) }, B(e3, ["screen", "source"])), i2 = (t3 = null == e3 ? void 0 : e3.action) && At.includes(t3.name) ? btoa(JSON.stringify(t3)) : "";
      return i2 && (o2.action = i2), function(e4) {
        return Ke.fetchDomain().then(function() {
          var t4 = Ke.get(), n3 = t4.appId, r3 = t4.connectDomain, o3 = t4.appSettings, i3 = t4._debug, a2 = t4._localhost, s2 = he({ app_id: n3, response_type: "silent_token", v: "1.60.0", debug: i3 ? 1 : null, localhost: a2 ? 1 : null }, e4);
          o3 && L(o3) && (s2.app_settings = V(o3));
          var c2 = K(s2);
          return Promise.resolve("https://" + r3 + "/open_account?" + c2);
        });
      }(o2).then(function(e4) {
        if (!window.open(e4, "_blank")) {
          var t4 = Ee(ye(z[z.CONNECT_WINDOW_NOT_OPENED], z.CONNECT_WINDOW_NOT_OPENED, Q()));
          return Promise.reject(t4);
        }
        return Promise.resolve();
      });
    });
  }, e2;
}();
!function(e2) {
  e2.INTERNAL_RESIZE = "VKSDKMessengerInternalResize", e2.INTERNAL_LOGOUT = "VKSDKMessengerInternalLogout";
}(Et || (Et = {})), function(e2) {
  e2.CLOSE_CHAT = "VKSDKMessengerCloseChat";
}(Tt || (Tt = {}));
var Ot;
var wt = new Oe({ config: [{ rule: ge, errorText: oe("config") }] });
var Ct = { styles: { bottom: "0", right: "0", zIndex: 99999 } };
var bt = function(e2) {
  function t2(t3) {
    var n2 = e2.call(this) || this;
    n2.config = Ct, n2.cssText = "\n    border: none;\n    display: none;\n    position: fixed;\n    color-scheme: auto;\n  ", n2.updateStyles = function() {
      if (n2.iframe) {
        var e3 = n2.config.styles, t4 = isFinite(e3.zIndex) ? e3.zIndex : 999999;
        n2.iframe.style.zIndex = "" + t4, n2.iframe.style.bottom = e3.bottom, n2.iframe.style.right = e3.right;
      }
    };
    var r2 = wt.validate({ config: t3 });
    return !r2.isValid() && console.error(r2.error()), n2.updateConfig(t3), n2;
  }
  return ce(t2, e2), t2.prototype.handleBridgeMessage = function(t3) {
    var n2 = this;
    switch (e2.prototype.handleBridgeMessage.call(this, t3), t3.handler) {
      case W.GET_CAPTCHA:
        var r2 = t3.params.uuid, o2 = new $e(r2, { captcha_sid: t3.params.captcha_sid, captcha_img: t3.params.captcha_img });
        o2.show().then(function(e3) {
          n2.bridge.sendMessage({ handler: W.GET_CAPTCHA + "Success", params: he({ uuid: r2 }, e3) });
        }).catch(function() {
          n2.bridge.sendMessage({ handler: W.GET_CAPTCHA + "Fail", params: { uuid: r2 } }), o2.destroy();
        });
        break;
      case Et.INTERNAL_RESIZE:
        this.handleInternalIframeResize(t3);
        break;
      case Et.INTERNAL_LOGOUT:
        this.handleLogout();
        break;
      case Tt.CLOSE_CHAT:
        this.events.emit(Tt.CLOSE_CHAT, t3.params);
        break;
      default:
        return;
    }
  }, t2.prototype.handleInternalIframeResize = function(e3) {
    var t3 = e3.params;
    this.iframe.width = t3.width + "px", this.iframe.height = t3.height + "px";
  }, t2.prototype.handleAfterUpdateConfig = function() {
    this.updateStyles();
  }, t2.prototype.handleAfterCreateIframe = function() {
    this.updateStyles();
  }, t2.prototype.validateParams = function(e3) {
    return e3.peer_id >= 0 ? Promise.reject(Z("peer_id", "Peer id can`t be positive")) : Promise.resolve(e3);
  }, t2.prototype.getIframeUrl = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      return e3.getIframeUrlParams().then(function(e4) {
        var t3 = Ke.get().connectDomain;
        return Promise.resolve("https://" + t3 + "/messenger?" + e4);
      });
    });
  }, t2;
}(mt);
!function(e2) {
  e2.SCANNED = "VKSDKQRScaned", e2.CLICKED = "VKSDKQRClicked";
}(Ot || (Ot = {}));
var Pt;
var Dt = new Oe({ container: [{ rule: ge, errorText: oe("container") }] });
var It = function(e2) {
  function t2(t3) {
    var n2 = e2.call(this) || this;
    n2.getIframeContainer = function() {
      return n2.config.container ? n2.config.container : window.document.body;
    };
    var r2 = Dt.validate(t3);
    return !r2.isValid() && console.error(r2.error()), (null == t3 ? void 0 : t3.langId) && !Ye.includes(null == t3 ? void 0 : t3.langId) && console.error(Z("lang_id", "This lang id is not allowed")), n2.updateConfig(t3), n2;
  }
  return ce(t2, e2), t2.prototype.getIframeUrl = function() {
    return this.getIframeUrlParams().then(function(e3) {
      var t3 = Ke.get().connectDomain;
      return Promise.resolve("https://" + t3 + "/qr_auth?" + e3);
    });
  }, t2.prototype.getIframeUrlParams = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      var t3, n2 = Ke.get(), r2 = n2.appId, o2 = n2._debug, i2 = n2._localhost;
      return Promise.resolve(K({ scheme: (null === (t3 = e3.params) || void 0 === t3 ? void 0 : t3.scheme) || "bright_light", app_id: r2, origin: location.protocol + "//" + location.host, lang_id: e3.config.langId || null, initial_stats_info: Fe(e3.config.entry) || null, debug: o2 ? 1 : null, localhost: i2 ? 1 : null }));
    });
  }, t2.prototype.handleBridgeMessage = function(t3) {
    var n2 = this;
    switch (e2.prototype.handleBridgeMessage.call(this, t3), t3.handler) {
      case Ot.CLICKED:
        this.events.emit(Ot.CLICKED);
        break;
      case Ot.SCANNED:
        this.events.emit(Ot.SCANNED, t3.params.token);
        break;
      case W.GET_CAPTCHA:
        var r2 = t3.params.uuid, o2 = new $e(r2, { captcha_sid: t3.params.captcha_sid, captcha_img: t3.params.captcha_img });
        o2.show().then(function(e3) {
          n2.bridge.sendMessage({ handler: W.GET_CAPTCHA + "Success", params: he({ uuid: r2 }, e3) });
        }).catch(function() {
          n2.bridge.sendMessage({ handler: W.GET_CAPTCHA + "Fail", params: { uuid: r2 } }), o2.destroy();
        });
        break;
      default:
        return;
    }
  }, t2;
}(mt);
!function(e2) {
  e2.CONTENT_IN_HEIGHT = "VKSDKUserContentInHeight", e2.VALIDATION_PHONE_CLOSE = "VKSDKUserValidationPhoneClose";
}(Pt || (Pt = {}));
var Nt;
var kt = new Oe({ container: [{ rule: ge, errorText: oe("container") }] });
var Rt = new Oe({ canSkip: [{ rule: ge, errorText: oe("canSkip") }], origin: [{ rule: ge, errorText: oe("origin") }] });
var xt = function(e2) {
  function t2(t3) {
    var n2 = e2.call(this) || this;
    n2.getIframeContainer = function() {
      return n2.config.container ? n2.config.container : window.document.body;
    };
    var r2 = kt.validate(t3);
    return !r2.isValid() && console.error(r2.error()), n2.updateConfig(t3), n2;
  }
  return ce(t2, e2), t2.prototype.getIframeUrl = function() {
    var e3 = he(he({ redirect_uri: this.params.url, uuid: I() }, B(this.params, ["screen", "source"])), { scheme: this.params.scheme }), t3 = We(this.params.action);
    t3 && (e3.action = t3);
    var n2 = Fe(this.params.entry);
    return n2 && (e3.initial_stats_info = n2), this.params.state && (e3.redirect_state = this.params.state), ze(e3);
  }, t2.prototype.handleBridgeMessage = function(t3) {
    switch (e2.prototype.handleBridgeMessage.call(this, t3), t3.handler) {
      case Pt.CONTENT_IN_HEIGHT:
        this.events.emit(Pt.CONTENT_IN_HEIGHT, t3.params);
        break;
      case Pt.VALIDATION_PHONE_CLOSE:
        this.events.emit(Pt.VALIDATION_PHONE_CLOSE, t3.params);
        break;
      default:
        return;
    }
  }, t2.prototype.validatePhone = function(e3) {
    var t3 = Rt.validate(e3);
    !t3.isValid() && console.error(t3.error());
    var n2 = { name: "auth_validation_phone", params: { status: e3.canSkip ? "1" : "0" } };
    e3.sid && (n2.params.sid = e3.sid), this.open({ url: e3.origin, scheme: e3.scheme, action: n2 });
  }, t2;
}(mt);
!function(e2) {
  e2.SUCCESS = "VKSDKVerificationProfileSuccess", e2.CLOSE = "VKSDKVerificationProfileClose";
}(Nt || (Nt = {}));
var Kt = new Oe({ config: [{ rule: ge, errorText: oe("config") }], provider: [{ rule: ve, errorText: re("provider") }, { rule: ge, errorText: oe("provider") }] });
var Mt = function(e2) {
  function t2(t3) {
    var n2 = e2.call(this) || this;
    n2.cssText = "\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 9999;\n    border: none;\n    display: none;\n  ";
    var r2 = Kt.validate({ config: t3, provider: t3.provider });
    return !r2.isValid() && console.error(r2.error()), n2.updateConfig(t3), n2;
  }
  return ce(t2, e2), t2.prototype.handleBridgeMessage = function(t3) {
    switch (e2.prototype.handleBridgeMessage.call(this, t3), t3.handler) {
      case Nt.SUCCESS:
        this.events.emit(Nt.SUCCESS);
        break;
      case Nt.CLOSE:
        this.close();
        break;
      default:
        return;
    }
  }, t2.prototype.handleAfterUpdateConfig = function() {
    this.updateZIndex();
  }, t2.prototype.handleAfterCreateIframe = function() {
    this.updateZIndex();
  }, t2.prototype.getIframeUrlParams = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      var t3 = Ke.get(), n2 = t3.superAppTokenV2, r2 = t3.appId, o2 = t3._debug, i2 = t3._localhost;
      return Promise.resolve(K(he(he({}, e3.params), { app: r2, superapp_token: n2, origin: location.protocol + "//" + location.host, debug: o2 ? 1 : null, localhost: i2 ? 1 : null, provider: e3.config.provider })));
    });
  }, t2.prototype.getIframeUrl = function() {
    var e3 = this;
    return Ke.fetchDomain().then(function() {
      return e3.getIframeUrlParams().then(function(e4) {
        var t3 = Ke.get().connectDomain;
        return Promise.resolve("https://" + t3 + "/verification_profile?" + e4);
      });
    });
  }, t2.prototype.updateZIndex = function() {
    if (this.iframe) {
      var e3 = this.config.zIndex;
      this.iframe.style.zIndex = "" + e3;
    }
  }, t2;
}(mt);
export {
  St as Account,
  Qe as AuthCaptchaEventsSDK,
  It as AuthQR,
  Ot as AuthQREvents,
  gt as Authorize,
  ut as AuthorizeEvents,
  q as BodyOverflowManager,
  at as ButtonOneTapAuthEventsSDK,
  W as CommonSDKEvents,
  Ke as Config,
  _t as Connect,
  yt as ConnectEvents,
  nt as DataPolicyEventsSDK,
  it as FloatingOneTapAuthEventsSDK,
  ct as GeoService,
  Xe as GeoserviceEvents,
  bt as Messenger,
  Tt as MessengerEvents,
  et as MiniApp,
  le as MiniAppEvents,
  tt as MiniAppService,
  ot as OneTapAuthEventsSDK,
  z as SDKErrorCodes,
  xt as User,
  Pt as UserEvents,
  Mt as VerificationProfile,
  Nt as VerificationProfileEvents
};
/*! Bundled license information:

@vkontakte/superappkit/dist/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=@vkontakte_superappkit.js.map
